{"ast":null,"code":"// src/TiptapEditor.jsx\nimport React,{useEffect,useRef}from\"react\";import{EditorContent,useEditor}from\"@tiptap/react\";import StarterKit from\"@tiptap/starter-kit\";import Highlight from\"@tiptap/extension-highlight\";import Placeholder from\"@tiptap/extension-placeholder\";import{Plugin,PluginKey}from\"prosemirror-state\";import{Decoration,DecorationSet}from\"prosemirror-view\";/* -------------------- helpers -------------------- */import{jsx as _jsx}from\"react/jsx-runtime\";function splitSentences(text){// simple, tolerant splitter\nconst re=/[^.!?]+[.!?]+|\\S+$/g;const out=[];let m,i=0;while(m=re.exec(text)){const s=m[0];out.push({text:s,from:i,to:i+s.length});i+=s.length;}return out;}function wordsIn(text){return text.trim().split(/\\s+/).filter(Boolean);}function countSyllables(word){const w=word.toLowerCase().replace(/[^a-z]/g,\"\");if(!w)return 0;if(w.length<=3)return 1;const cleaned=w.replace(/(?:es|ed|e)$/g,\"\");const m=cleaned.match(/[aeiouy]+/g);return Math.max(1,m?m.length:0);}function statsFor(text){const sentences=splitSentences(text);let words=0,syllables=0;for(const s of sentences){const ws=wordsIn(s.text);words+=ws.length;for(const w of ws)syllables+=countSyllables(w);}const sentenceCount=sentences.length||1;const WPS=words/sentenceCount;const SPW=words?syllables/words:0;const ease=206.835-1.015*WPS-84.6*SPW;// Flesch Reading Ease\nconst grade=0.39*WPS+11.8*SPW-15.59;// Flesch–Kincaid Grade\nreturn{wordCount:words,sentenceCount,ease,grade};}function tooltipText(_ref){let{words,grade,target,flags}=_ref;let s=`${words} words • Grade ${grade.toFixed(1)} • Target ${target}`;if(flags!==null&&flags!==void 0&&flags.length)s+=` • Flags: ${flags.join(\"; \")}`;return s;}/* -------------------- exempt proper nouns -------------------- */function useExemptProperNouns(){const[exempt,setExempt]=React.useState({single:new Set(),phrases:[]});useEffect(()=>{const url=`${process.env.PUBLIC_URL||\"\"}/exemptProperNouns.json`;fetch(url).then(r=>r.ok?r.json():null).then(data=>{if(!data)return;const single=new Set((data.singleWords||[]).map(s=>s.toLowerCase()));const phrases=(data.phrases||[]).map(p=>p.toLowerCase());setExempt({single,phrases});}).catch(()=>{// fallback so “California” doesn’t get underlined even if the json fails to load\nsetExempt(old=>({single:new Set([...old.single,\"california\"]),phrases:old.phrases}));});},[]);return exempt;}/* -------------------- decoration plugin -------------------- */const decoKey=new PluginKey(\"sentenceHighlighter\");// map a raw text offset back into a doc position (local counter each call)\nfunction mapToDocPos(doc,offset){let seen=0;let result=0;doc.descendants((node,posHere)=>{if(node.isText){const len=node.text.length;if(offset<=seen+len){result=posHere+(offset-seen);return false;}seen+=len;}else if(node.isBlock){// textBetween inserts a newline between blocks; count it\nif(seen<offset)seen+=1;}return undefined;});return result;}function buildDecorations(doc,cfg){const{targetGrade,showHardWords,exempt}=cfg;const text=doc.textBetween(0,doc.content.size,\"\\n\",\"\\n\");const sentences=splitSentences(text);const decos=[];// sentence highlights\nfor(const s of sentences){const ws=wordsIn(s.text);const words=ws.length;if(!words)continue;let syll=0;for(const w of ws)syll+=countSyllables(w);const SPW=syll/words;const ease=206.835-1.015*words-84.6*SPW;const grade=0.39*words+11.8*SPW-15.59;const veryHard=words>=25||grade>=targetGrade+3&&words>=18;const slightlyOver=words>=20||grade>=targetGrade+1&&words>=14;const longish=words>=15;let color=null;const flags=[];if(veryHard){color=\"red\";if(words>=25)flags.push(\"length\");if(grade>=targetGrade+3)flags.push(\"above target\");}else if(slightlyOver){color=\"yellow\";if(words>=20)flags.push(\"length\");if(grade>=targetGrade+1)flags.push(\"above target\");}else if(longish){color=\"blue\";flags.push(\"long\");}if(color){const from=mapToDocPos(doc,s.from);const to=mapToDocPos(doc,s.to);const title=tooltipText({words,grade,target:targetGrade,flags});decos.push(Decoration.inline(from,to,{nodeName:\"mark\",\"data-highlight-color\":color,title}));}}// likely hard words\nif(showHardWords){const wordRegex=/\\b[^\\s]+\\b/g;let m;while(m=wordRegex.exec(text)){const raw=m[0];const lower=raw.toLowerCase();// letters only?\nif(!/[a-z]/i.test(lower))continue;// phrase exemptions\nlet skip=false;for(const phrase of exempt.phrases){if(text.slice(m.index,m.index+phrase.length).toLowerCase()===phrase){skip=true;break;}}if(skip)continue;if(exempt.single.has(lower))continue;const hard=lower.length>=11||countSyllables(lower)>=4;if(hard){const from=mapToDocPos(doc,m.index);const to=mapToDocPos(doc,m.index+raw.length);decos.push(Decoration.inline(from,to,{\"data-hard-word\":\"1\",title:`Possibly hard word: “${raw}”`}));}}}return DecorationSet.create(doc,decos);}function highlighterPlugin(cfgRef){return new Plugin({key:decoKey,state:{init:(_,_ref2)=>{let{doc}=_ref2;return DecorationSet.create(doc,[]);},apply(tr,set,_old,state){const needs=tr.docChanged||tr.selectionSet||tr.getMeta(decoKey)===\"recompute\";return needs?buildDecorations(state.doc,cfgRef.current):set.map(tr.mapping,tr.doc);}},props:{decorations(state){return this.getState(state);}}});}/* -------------------- component -------------------- */export default function TiptapEditor(_ref3){let{targetGrade=6,showHardWords=true,onShowHardWordsChange,// kept for parity with your App\nonStats}=_ref3;const exempt=useExemptProperNouns();const cfgRef=useRef({targetGrade,showHardWords,exempt});// keep config fresh + trigger recompute\nconst editor=useEditor({extensions:[StarterKit.configure({history:true}),Highlight,Placeholder.configure({placeholder:\"Paste or type. Sentences that run long or read above your target will highlight here.\"}),highlighterPlugin(cfgRef)],editorProps:{attributes:{class:\"editor-content\",style:\"min-height: 220px;\"}},onUpdate(_ref4){let{editor}=_ref4;const plain=editor.state.doc.textBetween(0,editor.state.doc.content.size,\" \",\" \");onStats===null||onStats===void 0?void 0:onStats(statsFor(plain));editor.view.dispatch(editor.state.tr.setMeta(decoKey,\"recompute\"));}});useEffect(()=>{cfgRef.current={targetGrade,showHardWords,exempt};if(editor){editor.view.dispatch(editor.state.tr.setMeta(decoKey,\"recompute\"));}},[targetGrade,showHardWords,exempt,editor]);useEffect(()=>{if(!editor||typeof onShowHardWordsChange!==\"function\")return;// nothing to control from inside yet, but we keep the prop for future toggles\n},[editor,onShowHardWordsChange]);return/*#__PURE__*/_jsx(\"div\",{className:\"panel\",children:/*#__PURE__*/_jsx(EditorContent,{editor:editor})});}","map":{"version":3,"names":["React","useEffect","useRef","EditorContent","useEditor","StarterKit","Highlight","Placeholder","Plugin","PluginKey","Decoration","DecorationSet","jsx","_jsx","splitSentences","text","re","out","m","i","exec","s","push","from","to","length","wordsIn","trim","split","filter","Boolean","countSyllables","word","w","toLowerCase","replace","cleaned","match","Math","max","statsFor","sentences","words","syllables","ws","sentenceCount","WPS","SPW","ease","grade","wordCount","tooltipText","_ref","target","flags","toFixed","join","useExemptProperNouns","exempt","setExempt","useState","single","Set","phrases","url","process","env","PUBLIC_URL","fetch","then","r","ok","json","data","singleWords","map","p","catch","old","decoKey","mapToDocPos","doc","offset","seen","result","descendants","node","posHere","isText","len","isBlock","undefined","buildDecorations","cfg","targetGrade","showHardWords","textBetween","content","size","decos","syll","veryHard","slightlyOver","longish","color","title","inline","nodeName","wordRegex","raw","lower","test","skip","phrase","slice","index","has","hard","create","highlighterPlugin","cfgRef","key","state","init","_","_ref2","apply","tr","set","_old","needs","docChanged","selectionSet","getMeta","current","mapping","props","decorations","getState","TiptapEditor","_ref3","onShowHardWordsChange","onStats","editor","extensions","configure","history","placeholder","editorProps","attributes","class","style","onUpdate","_ref4","plain","view","dispatch","setMeta","className","children"],"sources":["C:/Users/Mitchell/Downloads/Hemming Way App Clone/Hemming Way App Clone/src/TiptapEditor.jsx"],"sourcesContent":["// src/TiptapEditor.jsx\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { EditorContent, useEditor } from \"@tiptap/react\";\r\nimport StarterKit from \"@tiptap/starter-kit\";\r\nimport Highlight from \"@tiptap/extension-highlight\";\r\nimport Placeholder from \"@tiptap/extension-placeholder\";\r\n\r\nimport { Plugin, PluginKey } from \"prosemirror-state\";\r\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\r\n\r\n/* -------------------- helpers -------------------- */\r\n\r\nfunction splitSentences(text) {\r\n  // simple, tolerant splitter\r\n  const re = /[^.!?]+[.!?]+|\\S+$/g;\r\n  const out = [];\r\n  let m, i = 0;\r\n  while ((m = re.exec(text))) {\r\n    const s = m[0];\r\n    out.push({ text: s, from: i, to: i + s.length });\r\n    i += s.length;\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction wordsIn(text) {\r\n  return text.trim().split(/\\s+/).filter(Boolean);\r\n}\r\n\r\nfunction countSyllables(word) {\r\n  const w = word.toLowerCase().replace(/[^a-z]/g, \"\");\r\n  if (!w) return 0;\r\n  if (w.length <= 3) return 1;\r\n  const cleaned = w.replace(/(?:es|ed|e)$/g, \"\");\r\n  const m = cleaned.match(/[aeiouy]+/g);\r\n  return Math.max(1, m ? m.length : 0);\r\n}\r\n\r\nfunction statsFor(text) {\r\n  const sentences = splitSentences(text);\r\n  let words = 0, syllables = 0;\r\n  for (const s of sentences) {\r\n    const ws = wordsIn(s.text);\r\n    words += ws.length;\r\n    for (const w of ws) syllables += countSyllables(w);\r\n  }\r\n  const sentenceCount = sentences.length || 1;\r\n  const WPS = words / sentenceCount;\r\n  const SPW = words ? syllables / words : 0;\r\n\r\n  const ease = 206.835 - 1.015 * WPS - 84.6 * SPW;           // Flesch Reading Ease\r\n  const grade = 0.39 * WPS + 11.8 * SPW - 15.59;             // Flesch–Kincaid Grade\r\n  return { wordCount: words, sentenceCount, ease, grade };\r\n}\r\n\r\nfunction tooltipText({ words, grade, target, flags }) {\r\n  let s = `${words} words • Grade ${grade.toFixed(1)} • Target ${target}`;\r\n  if (flags?.length) s += ` • Flags: ${flags.join(\"; \")}`;\r\n  return s;\r\n}\r\n\r\n/* -------------------- exempt proper nouns -------------------- */\r\n\r\nfunction useExemptProperNouns() {\r\n  const [exempt, setExempt] = React.useState({ single: new Set(), phrases: [] });\r\n\r\n  useEffect(() => {\r\n    const url = `${process.env.PUBLIC_URL || \"\"}/exemptProperNouns.json`;\r\n    fetch(url)\r\n      .then(r => (r.ok ? r.json() : null))\r\n      .then(data => {\r\n        if (!data) return;\r\n        const single = new Set((data.singleWords || []).map(s => s.toLowerCase()));\r\n        const phrases = (data.phrases || []).map(p => p.toLowerCase());\r\n        setExempt({ single, phrases });\r\n      })\r\n      .catch(() => {\r\n        // fallback so “California” doesn’t get underlined even if the json fails to load\r\n        setExempt(old => ({\r\n          single: new Set([...old.single, \"california\"]),\r\n          phrases: old.phrases\r\n        }));\r\n      });\r\n  }, []);\r\n\r\n  return exempt;\r\n}\r\n\r\n/* -------------------- decoration plugin -------------------- */\r\n\r\nconst decoKey = new PluginKey(\"sentenceHighlighter\");\r\n\r\n// map a raw text offset back into a doc position (local counter each call)\r\nfunction mapToDocPos(doc, offset) {\r\n  let seen = 0;\r\n  let result = 0;\r\n  doc.descendants((node, posHere) => {\r\n    if (node.isText) {\r\n      const len = node.text.length;\r\n      if (offset <= seen + len) {\r\n        result = posHere + (offset - seen);\r\n        return false;\r\n      }\r\n      seen += len;\r\n    } else if (node.isBlock) {\r\n      // textBetween inserts a newline between blocks; count it\r\n      if (seen < offset) seen += 1;\r\n    }\r\n    return undefined;\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction buildDecorations(doc, cfg) {\r\n  const { targetGrade, showHardWords, exempt } = cfg;\r\n\r\n  const text = doc.textBetween(0, doc.content.size, \"\\n\", \"\\n\");\r\n  const sentences = splitSentences(text);\r\n\r\n  const decos = [];\r\n\r\n  // sentence highlights\r\n  for (const s of sentences) {\r\n    const ws = wordsIn(s.text);\r\n    const words = ws.length;\r\n    if (!words) continue;\r\n\r\n    let syll = 0;\r\n    for (const w of ws) syll += countSyllables(w);\r\n\r\n    const SPW = syll / words;\r\n    const ease = 206.835 - 1.015 * words - 84.6 * SPW;\r\n    const grade = 0.39 * words + 11.8 * SPW - 15.59;\r\n\r\n    const veryHard    = words >= 25 || (grade >= targetGrade + 3 && words >= 18);\r\n    const slightlyOver= words >= 20 || (grade >= targetGrade + 1 && words >= 14);\r\n    const longish     = words >= 15;\r\n\r\n    let color = null;\r\n    const flags = [];\r\n    if (veryHard) {\r\n      color = \"red\";\r\n      if (words >= 25) flags.push(\"length\");\r\n      if (grade >= targetGrade + 3) flags.push(\"above target\");\r\n    } else if (slightlyOver) {\r\n      color = \"yellow\";\r\n      if (words >= 20) flags.push(\"length\");\r\n      if (grade >= targetGrade + 1) flags.push(\"above target\");\r\n    } else if (longish) {\r\n      color = \"blue\";\r\n      flags.push(\"long\");\r\n    }\r\n\r\n    if (color) {\r\n      const from = mapToDocPos(doc, s.from);\r\n      const to   = mapToDocPos(doc, s.to);\r\n      const title = tooltipText({ words, grade, target: targetGrade, flags });\r\n      decos.push(\r\n        Decoration.inline(from, to, {\r\n          nodeName: \"mark\",\r\n          \"data-highlight-color\": color,\r\n          title\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  // likely hard words\r\n  if (showHardWords) {\r\n    const wordRegex = /\\b[^\\s]+\\b/g;\r\n    let m;\r\n    while ((m = wordRegex.exec(text))) {\r\n      const raw = m[0];\r\n      const lower = raw.toLowerCase();\r\n\r\n      // letters only?\r\n      if (!/[a-z]/i.test(lower)) continue;\r\n\r\n      // phrase exemptions\r\n      let skip = false;\r\n      for (const phrase of exempt.phrases) {\r\n        if (text.slice(m.index, m.index + phrase.length).toLowerCase() === phrase) {\r\n          skip = true;\r\n          break;\r\n        }\r\n      }\r\n      if (skip) continue;\r\n      if (exempt.single.has(lower)) continue;\r\n\r\n      const hard = lower.length >= 11 || countSyllables(lower) >= 4;\r\n      if (hard) {\r\n        const from = mapToDocPos(doc, m.index);\r\n        const to   = mapToDocPos(doc, m.index + raw.length);\r\n        decos.push(\r\n          Decoration.inline(from, to, {\r\n            \"data-hard-word\": \"1\",\r\n            title: `Possibly hard word: “${raw}”`\r\n          })\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return DecorationSet.create(doc, decos);\r\n}\r\n\r\nfunction highlighterPlugin(cfgRef) {\r\n  return new Plugin({\r\n    key: decoKey,\r\n    state: {\r\n      init: (_, { doc }) => DecorationSet.create(doc, []),\r\n      apply(tr, set, _old, state) {\r\n        const needs =\r\n          tr.docChanged ||\r\n          tr.selectionSet ||\r\n          tr.getMeta(decoKey) === \"recompute\";\r\n\r\n        return needs ? buildDecorations(state.doc, cfgRef.current) : set.map(tr.mapping, tr.doc);\r\n      }\r\n    },\r\n    props: {\r\n      decorations(state) {\r\n        return this.getState(state);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/* -------------------- component -------------------- */\r\n\r\nexport default function TiptapEditor({\r\n  targetGrade = 6,\r\n  showHardWords = true,\r\n  onShowHardWordsChange,   // kept for parity with your App\r\n  onStats\r\n}) {\r\n  const exempt = useExemptProperNouns();\r\n\r\n  const cfgRef = useRef({ targetGrade, showHardWords, exempt });\r\n\r\n  // keep config fresh + trigger recompute\r\n  const editor = useEditor({\r\n    extensions: [\r\n      StarterKit.configure({ history: true }),\r\n      Highlight,\r\n      Placeholder.configure({\r\n        placeholder:\r\n          \"Paste or type. Sentences that run long or read above your target will highlight here.\"\r\n      }),\r\n      highlighterPlugin(cfgRef)\r\n    ],\r\n    editorProps: {\r\n      attributes: {\r\n        class: \"editor-content\",\r\n        style: \"min-height: 220px;\"\r\n      }\r\n    },\r\n    onUpdate({ editor }) {\r\n      const plain = editor.state.doc.textBetween(0, editor.state.doc.content.size, \" \", \" \");\r\n      onStats?.(statsFor(plain));\r\n      editor.view.dispatch(editor.state.tr.setMeta(decoKey, \"recompute\"));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    cfgRef.current = { targetGrade, showHardWords, exempt };\r\n    if (editor) {\r\n      editor.view.dispatch(editor.state.tr.setMeta(decoKey, \"recompute\"));\r\n    }\r\n  }, [targetGrade, showHardWords, exempt, editor]);\r\n\r\n  useEffect(() => {\r\n    if (!editor || typeof onShowHardWordsChange !== \"function\") return;\r\n    // nothing to control from inside yet, but we keep the prop for future toggles\r\n  }, [editor, onShowHardWordsChange]);\r\n\r\n  return (\r\n    <div className=\"panel\">\r\n      <EditorContent editor={editor} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAChD,OAASC,aAAa,CAAEC,SAAS,KAAQ,eAAe,CACxD,MAAO,CAAAC,UAAU,KAAM,qBAAqB,CAC5C,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CAEvD,OAASC,MAAM,CAAEC,SAAS,KAAQ,mBAAmB,CACrD,OAASC,UAAU,CAAEC,aAAa,KAAQ,kBAAkB,CAE5D,8DAAAC,GAAA,IAAAC,IAAA,yBAEA,QAAS,CAAAC,cAAcA,CAACC,IAAI,CAAE,CAC5B;AACA,KAAM,CAAAC,EAAE,CAAG,qBAAqB,CAChC,KAAM,CAAAC,GAAG,CAAG,EAAE,CACd,GAAI,CAAAC,CAAC,CAAEC,CAAC,CAAG,CAAC,CACZ,MAAQD,CAAC,CAAGF,EAAE,CAACI,IAAI,CAACL,IAAI,CAAC,CAAG,CAC1B,KAAM,CAAAM,CAAC,CAAGH,CAAC,CAAC,CAAC,CAAC,CACdD,GAAG,CAACK,IAAI,CAAC,CAAEP,IAAI,CAAEM,CAAC,CAAEE,IAAI,CAAEJ,CAAC,CAAEK,EAAE,CAAEL,CAAC,CAAGE,CAAC,CAACI,MAAO,CAAC,CAAC,CAChDN,CAAC,EAAIE,CAAC,CAACI,MAAM,CACf,CACA,MAAO,CAAAR,GAAG,CACZ,CAEA,QAAS,CAAAS,OAAOA,CAACX,IAAI,CAAE,CACrB,MAAO,CAAAA,IAAI,CAACY,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAK,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,CACjD,CAEA,QAAS,CAAAC,cAAcA,CAACC,IAAI,CAAE,CAC5B,KAAM,CAAAC,CAAC,CAAGD,IAAI,CAACE,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,CACnD,GAAI,CAACF,CAAC,CAAE,MAAO,EAAC,CAChB,GAAIA,CAAC,CAACR,MAAM,EAAI,CAAC,CAAE,MAAO,EAAC,CAC3B,KAAM,CAAAW,OAAO,CAAGH,CAAC,CAACE,OAAO,CAAC,eAAe,CAAE,EAAE,CAAC,CAC9C,KAAM,CAAAjB,CAAC,CAAGkB,OAAO,CAACC,KAAK,CAAC,YAAY,CAAC,CACrC,MAAO,CAAAC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAErB,CAAC,CAAGA,CAAC,CAACO,MAAM,CAAG,CAAC,CAAC,CACtC,CAEA,QAAS,CAAAe,QAAQA,CAACzB,IAAI,CAAE,CACtB,KAAM,CAAA0B,SAAS,CAAG3B,cAAc,CAACC,IAAI,CAAC,CACtC,GAAI,CAAA2B,KAAK,CAAG,CAAC,CAAEC,SAAS,CAAG,CAAC,CAC5B,IAAK,KAAM,CAAAtB,CAAC,GAAI,CAAAoB,SAAS,CAAE,CACzB,KAAM,CAAAG,EAAE,CAAGlB,OAAO,CAACL,CAAC,CAACN,IAAI,CAAC,CAC1B2B,KAAK,EAAIE,EAAE,CAACnB,MAAM,CAClB,IAAK,KAAM,CAAAQ,CAAC,GAAI,CAAAW,EAAE,CAAED,SAAS,EAAIZ,cAAc,CAACE,CAAC,CAAC,CACpD,CACA,KAAM,CAAAY,aAAa,CAAGJ,SAAS,CAAChB,MAAM,EAAI,CAAC,CAC3C,KAAM,CAAAqB,GAAG,CAAGJ,KAAK,CAAGG,aAAa,CACjC,KAAM,CAAAE,GAAG,CAAGL,KAAK,CAAGC,SAAS,CAAGD,KAAK,CAAG,CAAC,CAEzC,KAAM,CAAAM,IAAI,CAAG,OAAO,CAAG,KAAK,CAAGF,GAAG,CAAG,IAAI,CAAGC,GAAG,CAAY;AAC3D,KAAM,CAAAE,KAAK,CAAG,IAAI,CAAGH,GAAG,CAAG,IAAI,CAAGC,GAAG,CAAG,KAAK,CAAc;AAC3D,MAAO,CAAEG,SAAS,CAAER,KAAK,CAAEG,aAAa,CAAEG,IAAI,CAAEC,KAAM,CAAC,CACzD,CAEA,QAAS,CAAAE,WAAWA,CAAAC,IAAA,CAAkC,IAAjC,CAAEV,KAAK,CAAEO,KAAK,CAAEI,MAAM,CAAEC,KAAM,CAAC,CAAAF,IAAA,CAClD,GAAI,CAAA/B,CAAC,CAAG,GAAGqB,KAAK,kBAAkBO,KAAK,CAACM,OAAO,CAAC,CAAC,CAAC,aAAaF,MAAM,EAAE,CACvE,GAAIC,KAAK,SAALA,KAAK,WAALA,KAAK,CAAE7B,MAAM,CAAEJ,CAAC,EAAI,aAAaiC,KAAK,CAACE,IAAI,CAAC,IAAI,CAAC,EAAE,CACvD,MAAO,CAAAnC,CAAC,CACV,CAEA,mEAEA,QAAS,CAAAoC,oBAAoBA,CAAA,CAAG,CAC9B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAG3D,KAAK,CAAC4D,QAAQ,CAAC,CAAEC,MAAM,CAAE,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAEC,OAAO,CAAE,EAAG,CAAC,CAAC,CAE9E9D,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+D,GAAG,CAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU,EAAI,EAAE,yBAAyB,CACpEC,KAAK,CAACJ,GAAG,CAAC,CACPK,IAAI,CAACC,CAAC,EAAKA,CAAC,CAACC,EAAE,CAAGD,CAAC,CAACE,IAAI,CAAC,CAAC,CAAG,IAAK,CAAC,CACnCH,IAAI,CAACI,IAAI,EAAI,CACZ,GAAI,CAACA,IAAI,CAAE,OACX,KAAM,CAAAZ,MAAM,CAAG,GAAI,CAAAC,GAAG,CAAC,CAACW,IAAI,CAACC,WAAW,EAAI,EAAE,EAAEC,GAAG,CAACtD,CAAC,EAAIA,CAAC,CAACa,WAAW,CAAC,CAAC,CAAC,CAAC,CAC1E,KAAM,CAAA6B,OAAO,CAAG,CAACU,IAAI,CAACV,OAAO,EAAI,EAAE,EAAEY,GAAG,CAACC,CAAC,EAAIA,CAAC,CAAC1C,WAAW,CAAC,CAAC,CAAC,CAC9DyB,SAAS,CAAC,CAAEE,MAAM,CAAEE,OAAQ,CAAC,CAAC,CAChC,CAAC,CAAC,CACDc,KAAK,CAAC,IAAM,CACX;AACAlB,SAAS,CAACmB,GAAG,GAAK,CAChBjB,MAAM,CAAE,GAAI,CAAAC,GAAG,CAAC,CAAC,GAAGgB,GAAG,CAACjB,MAAM,CAAE,YAAY,CAAC,CAAC,CAC9CE,OAAO,CAAEe,GAAG,CAACf,OACf,CAAC,CAAC,CAAC,CACL,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAL,MAAM,CACf,CAEA,iEAEA,KAAM,CAAAqB,OAAO,CAAG,GAAI,CAAAtE,SAAS,CAAC,qBAAqB,CAAC,CAEpD;AACA,QAAS,CAAAuE,WAAWA,CAACC,GAAG,CAAEC,MAAM,CAAE,CAChC,GAAI,CAAAC,IAAI,CAAG,CAAC,CACZ,GAAI,CAAAC,MAAM,CAAG,CAAC,CACdH,GAAG,CAACI,WAAW,CAAC,CAACC,IAAI,CAAEC,OAAO,GAAK,CACjC,GAAID,IAAI,CAACE,MAAM,CAAE,CACf,KAAM,CAAAC,GAAG,CAAGH,IAAI,CAACvE,IAAI,CAACU,MAAM,CAC5B,GAAIyD,MAAM,EAAIC,IAAI,CAAGM,GAAG,CAAE,CACxBL,MAAM,CAAGG,OAAO,EAAIL,MAAM,CAAGC,IAAI,CAAC,CAClC,MAAO,MAAK,CACd,CACAA,IAAI,EAAIM,GAAG,CACb,CAAC,IAAM,IAAIH,IAAI,CAACI,OAAO,CAAE,CACvB;AACA,GAAIP,IAAI,CAAGD,MAAM,CAAEC,IAAI,EAAI,CAAC,CAC9B,CACA,MAAO,CAAAQ,SAAS,CAClB,CAAC,CAAC,CACF,MAAO,CAAAP,MAAM,CACf,CAEA,QAAS,CAAAQ,gBAAgBA,CAACX,GAAG,CAAEY,GAAG,CAAE,CAClC,KAAM,CAAEC,WAAW,CAAEC,aAAa,CAAErC,MAAO,CAAC,CAAGmC,GAAG,CAElD,KAAM,CAAA9E,IAAI,CAAGkE,GAAG,CAACe,WAAW,CAAC,CAAC,CAAEf,GAAG,CAACgB,OAAO,CAACC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CAC7D,KAAM,CAAAzD,SAAS,CAAG3B,cAAc,CAACC,IAAI,CAAC,CAEtC,KAAM,CAAAoF,KAAK,CAAG,EAAE,CAEhB;AACA,IAAK,KAAM,CAAA9E,CAAC,GAAI,CAAAoB,SAAS,CAAE,CACzB,KAAM,CAAAG,EAAE,CAAGlB,OAAO,CAACL,CAAC,CAACN,IAAI,CAAC,CAC1B,KAAM,CAAA2B,KAAK,CAAGE,EAAE,CAACnB,MAAM,CACvB,GAAI,CAACiB,KAAK,CAAE,SAEZ,GAAI,CAAA0D,IAAI,CAAG,CAAC,CACZ,IAAK,KAAM,CAAAnE,CAAC,GAAI,CAAAW,EAAE,CAAEwD,IAAI,EAAIrE,cAAc,CAACE,CAAC,CAAC,CAE7C,KAAM,CAAAc,GAAG,CAAGqD,IAAI,CAAG1D,KAAK,CACxB,KAAM,CAAAM,IAAI,CAAG,OAAO,CAAG,KAAK,CAAGN,KAAK,CAAG,IAAI,CAAGK,GAAG,CACjD,KAAM,CAAAE,KAAK,CAAG,IAAI,CAAGP,KAAK,CAAG,IAAI,CAAGK,GAAG,CAAG,KAAK,CAE/C,KAAM,CAAAsD,QAAQ,CAAM3D,KAAK,EAAI,EAAE,EAAKO,KAAK,EAAI6C,WAAW,CAAG,CAAC,EAAIpD,KAAK,EAAI,EAAG,CAC5E,KAAM,CAAA4D,YAAY,CAAE5D,KAAK,EAAI,EAAE,EAAKO,KAAK,EAAI6C,WAAW,CAAG,CAAC,EAAIpD,KAAK,EAAI,EAAG,CAC5E,KAAM,CAAA6D,OAAO,CAAO7D,KAAK,EAAI,EAAE,CAE/B,GAAI,CAAA8D,KAAK,CAAG,IAAI,CAChB,KAAM,CAAAlD,KAAK,CAAG,EAAE,CAChB,GAAI+C,QAAQ,CAAE,CACZG,KAAK,CAAG,KAAK,CACb,GAAI9D,KAAK,EAAI,EAAE,CAAEY,KAAK,CAAChC,IAAI,CAAC,QAAQ,CAAC,CACrC,GAAI2B,KAAK,EAAI6C,WAAW,CAAG,CAAC,CAAExC,KAAK,CAAChC,IAAI,CAAC,cAAc,CAAC,CAC1D,CAAC,IAAM,IAAIgF,YAAY,CAAE,CACvBE,KAAK,CAAG,QAAQ,CAChB,GAAI9D,KAAK,EAAI,EAAE,CAAEY,KAAK,CAAChC,IAAI,CAAC,QAAQ,CAAC,CACrC,GAAI2B,KAAK,EAAI6C,WAAW,CAAG,CAAC,CAAExC,KAAK,CAAChC,IAAI,CAAC,cAAc,CAAC,CAC1D,CAAC,IAAM,IAAIiF,OAAO,CAAE,CAClBC,KAAK,CAAG,MAAM,CACdlD,KAAK,CAAChC,IAAI,CAAC,MAAM,CAAC,CACpB,CAEA,GAAIkF,KAAK,CAAE,CACT,KAAM,CAAAjF,IAAI,CAAGyD,WAAW,CAACC,GAAG,CAAE5D,CAAC,CAACE,IAAI,CAAC,CACrC,KAAM,CAAAC,EAAE,CAAKwD,WAAW,CAACC,GAAG,CAAE5D,CAAC,CAACG,EAAE,CAAC,CACnC,KAAM,CAAAiF,KAAK,CAAGtD,WAAW,CAAC,CAAET,KAAK,CAAEO,KAAK,CAAEI,MAAM,CAAEyC,WAAW,CAAExC,KAAM,CAAC,CAAC,CACvE6C,KAAK,CAAC7E,IAAI,CACRZ,UAAU,CAACgG,MAAM,CAACnF,IAAI,CAAEC,EAAE,CAAE,CAC1BmF,QAAQ,CAAE,MAAM,CAChB,sBAAsB,CAAEH,KAAK,CAC7BC,KACF,CAAC,CACH,CAAC,CACH,CACF,CAEA;AACA,GAAIV,aAAa,CAAE,CACjB,KAAM,CAAAa,SAAS,CAAG,aAAa,CAC/B,GAAI,CAAA1F,CAAC,CACL,MAAQA,CAAC,CAAG0F,SAAS,CAACxF,IAAI,CAACL,IAAI,CAAC,CAAG,CACjC,KAAM,CAAA8F,GAAG,CAAG3F,CAAC,CAAC,CAAC,CAAC,CAChB,KAAM,CAAA4F,KAAK,CAAGD,GAAG,CAAC3E,WAAW,CAAC,CAAC,CAE/B;AACA,GAAI,CAAC,QAAQ,CAAC6E,IAAI,CAACD,KAAK,CAAC,CAAE,SAE3B;AACA,GAAI,CAAAE,IAAI,CAAG,KAAK,CAChB,IAAK,KAAM,CAAAC,MAAM,GAAI,CAAAvD,MAAM,CAACK,OAAO,CAAE,CACnC,GAAIhD,IAAI,CAACmG,KAAK,CAAChG,CAAC,CAACiG,KAAK,CAAEjG,CAAC,CAACiG,KAAK,CAAGF,MAAM,CAACxF,MAAM,CAAC,CAACS,WAAW,CAAC,CAAC,GAAK+E,MAAM,CAAE,CACzED,IAAI,CAAG,IAAI,CACX,MACF,CACF,CACA,GAAIA,IAAI,CAAE,SACV,GAAItD,MAAM,CAACG,MAAM,CAACuD,GAAG,CAACN,KAAK,CAAC,CAAE,SAE9B,KAAM,CAAAO,IAAI,CAAGP,KAAK,CAACrF,MAAM,EAAI,EAAE,EAAIM,cAAc,CAAC+E,KAAK,CAAC,EAAI,CAAC,CAC7D,GAAIO,IAAI,CAAE,CACR,KAAM,CAAA9F,IAAI,CAAGyD,WAAW,CAACC,GAAG,CAAE/D,CAAC,CAACiG,KAAK,CAAC,CACtC,KAAM,CAAA3F,EAAE,CAAKwD,WAAW,CAACC,GAAG,CAAE/D,CAAC,CAACiG,KAAK,CAAGN,GAAG,CAACpF,MAAM,CAAC,CACnD0E,KAAK,CAAC7E,IAAI,CACRZ,UAAU,CAACgG,MAAM,CAACnF,IAAI,CAAEC,EAAE,CAAE,CAC1B,gBAAgB,CAAE,GAAG,CACrBiF,KAAK,CAAE,wBAAwBI,GAAG,GACpC,CAAC,CACH,CAAC,CACH,CACF,CACF,CAEA,MAAO,CAAAlG,aAAa,CAAC2G,MAAM,CAACrC,GAAG,CAAEkB,KAAK,CAAC,CACzC,CAEA,QAAS,CAAAoB,iBAAiBA,CAACC,MAAM,CAAE,CACjC,MAAO,IAAI,CAAAhH,MAAM,CAAC,CAChBiH,GAAG,CAAE1C,OAAO,CACZ2C,KAAK,CAAE,CACLC,IAAI,CAAEA,CAACC,CAAC,CAAAC,KAAA,OAAE,CAAE5C,GAAI,CAAC,CAAA4C,KAAA,OAAK,CAAAlH,aAAa,CAAC2G,MAAM,CAACrC,GAAG,CAAE,EAAE,CAAC,GACnD6C,KAAKA,CAACC,EAAE,CAAEC,GAAG,CAAEC,IAAI,CAAEP,KAAK,CAAE,CAC1B,KAAM,CAAAQ,KAAK,CACTH,EAAE,CAACI,UAAU,EACbJ,EAAE,CAACK,YAAY,EACfL,EAAE,CAACM,OAAO,CAACtD,OAAO,CAAC,GAAK,WAAW,CAErC,MAAO,CAAAmD,KAAK,CAAGtC,gBAAgB,CAAC8B,KAAK,CAACzC,GAAG,CAAEuC,MAAM,CAACc,OAAO,CAAC,CAAGN,GAAG,CAACrD,GAAG,CAACoD,EAAE,CAACQ,OAAO,CAAER,EAAE,CAAC9C,GAAG,CAAC,CAC1F,CACF,CAAC,CACDuD,KAAK,CAAE,CACLC,WAAWA,CAACf,KAAK,CAAE,CACjB,MAAO,KAAI,CAACgB,QAAQ,CAAChB,KAAK,CAAC,CAC7B,CACF,CACF,CAAC,CAAC,CACJ,CAEA,yDAEA,cAAe,SAAS,CAAAiB,YAAYA,CAAAC,KAAA,CAKjC,IALkC,CACnC9C,WAAW,CAAG,CAAC,CACfC,aAAa,CAAG,IAAI,CACpB8C,qBAAqB,CAAI;AACzBC,OACF,CAAC,CAAAF,KAAA,CACC,KAAM,CAAAlF,MAAM,CAAGD,oBAAoB,CAAC,CAAC,CAErC,KAAM,CAAA+D,MAAM,CAAGtH,MAAM,CAAC,CAAE4F,WAAW,CAAEC,aAAa,CAAErC,MAAO,CAAC,CAAC,CAE7D;AACA,KAAM,CAAAqF,MAAM,CAAG3I,SAAS,CAAC,CACvB4I,UAAU,CAAE,CACV3I,UAAU,CAAC4I,SAAS,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CACvC5I,SAAS,CACTC,WAAW,CAAC0I,SAAS,CAAC,CACpBE,WAAW,CACT,uFACJ,CAAC,CAAC,CACF5B,iBAAiB,CAACC,MAAM,CAAC,CAC1B,CACD4B,WAAW,CAAE,CACXC,UAAU,CAAE,CACVC,KAAK,CAAE,gBAAgB,CACvBC,KAAK,CAAE,oBACT,CACF,CAAC,CACDC,QAAQA,CAAAC,KAAA,CAAa,IAAZ,CAAEV,MAAO,CAAC,CAAAU,KAAA,CACjB,KAAM,CAAAC,KAAK,CAAGX,MAAM,CAACrB,KAAK,CAACzC,GAAG,CAACe,WAAW,CAAC,CAAC,CAAE+C,MAAM,CAACrB,KAAK,CAACzC,GAAG,CAACgB,OAAO,CAACC,IAAI,CAAE,GAAG,CAAE,GAAG,CAAC,CACtF4C,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAGtG,QAAQ,CAACkH,KAAK,CAAC,CAAC,CAC1BX,MAAM,CAACY,IAAI,CAACC,QAAQ,CAACb,MAAM,CAACrB,KAAK,CAACK,EAAE,CAAC8B,OAAO,CAAC9E,OAAO,CAAE,WAAW,CAAC,CAAC,CACrE,CACF,CAAC,CAAC,CAEF9E,SAAS,CAAC,IAAM,CACduH,MAAM,CAACc,OAAO,CAAG,CAAExC,WAAW,CAAEC,aAAa,CAAErC,MAAO,CAAC,CACvD,GAAIqF,MAAM,CAAE,CACVA,MAAM,CAACY,IAAI,CAACC,QAAQ,CAACb,MAAM,CAACrB,KAAK,CAACK,EAAE,CAAC8B,OAAO,CAAC9E,OAAO,CAAE,WAAW,CAAC,CAAC,CACrE,CACF,CAAC,CAAE,CAACe,WAAW,CAAEC,aAAa,CAAErC,MAAM,CAAEqF,MAAM,CAAC,CAAC,CAEhD9I,SAAS,CAAC,IAAM,CACd,GAAI,CAAC8I,MAAM,EAAI,MAAO,CAAAF,qBAAqB,GAAK,UAAU,CAAE,OAC5D;AACF,CAAC,CAAE,CAACE,MAAM,CAAEF,qBAAqB,CAAC,CAAC,CAEnC,mBACEhI,IAAA,QAAKiJ,SAAS,CAAC,OAAO,CAAAC,QAAA,cACpBlJ,IAAA,CAACV,aAAa,EAAC4I,MAAM,CAAEA,MAAO,CAAE,CAAC,CAC9B,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}