{"ast":null,"code":"// TiptapEditor.jsx\nimport React,{useEffect,useState}from\"react\";import{useEditor,EditorContent}from\"@tiptap/react\";import StarterKit from\"@tiptap/starter-kit\";import Highlight from\"@tiptap/extension-highlight\";import{analyzeSentence,countWords,countSentences,calculateFleschKincaidGrade,calculateFleschReadingEase}from\"./readabilityUtils\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function TiptapEditor(_ref){let{targetGrade}=_ref;const[readabilityStats,setReadabilityStats]=useState({wordCount:0,sentenceCount:0,grade:0,ease:0});const editor=useEditor({extensions:[StarterKit,Highlight],content:`<p>Start typing your text here...</p>`,editorProps:{attributes:{class:\"prose max-w-none p-4 border border-gray-300 rounded bg-white\"}},onUpdate:_ref2=>{let{editor}=_ref2;const text=editor.getText();updateStats(text);highlightSentences(editor,text,targetGrade);}});function updateStats(text){setReadabilityStats({wordCount:countWords(text),sentenceCount:countSentences(text),grade:calculateFleschKincaidGrade(text),ease:calculateFleschReadingEase(text)});}function highlightSentences(editor,text,targetGrade){const sentences=text.match(/[^.!?]+[.!?]*/g)||[];editor.commands.unsetHighlight();let start=0;for(const sentence of sentences){const trimmed=sentence.trim();const{grade,wordCount}=analyzeSentence(trimmed);const end=start+trimmed.length;let color=null;if(wordCount>=25)color=\"blue\";else if(grade>targetGrade+2)color=\"red\";else if(grade>targetGrade)color=\"yellow\";if(color){editor.commands.setTextSelection({from:start+1,to:end+1});editor.commands.setHighlight({color});// Tooltip via title attribute\nconst tooltip=`Grade ${grade}, ${wordCount} words — ${grade>targetGrade?\"try splitting it\":\"okay\"}`;editor.commands.insertContentAt({from:start+1,to:end+1},`<mark data-highlight-color=\"${color}\" title=\"${tooltip}\">${trimmed}</mark>`);}start=end+1;}editor.commands.setTextSelection(0);}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:[\"Words: \",readabilityStats.wordCount]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:[\"Sentences: \",readabilityStats.sentenceCount]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-green-100 px-2 py-1 rounded\",children:[\"Grade Level: \",readabilityStats.grade]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-blue-100 px-2 py-1 rounded\",children:[\"Reading Ease: \",readabilityStats.ease]})]}),/*#__PURE__*/_jsx(EditorContent,{editor:editor})]});}","map":{"version":3,"names":["React","useEffect","useState","useEditor","EditorContent","StarterKit","Highlight","analyzeSentence","countWords","countSentences","calculateFleschKincaidGrade","calculateFleschReadingEase","jsxs","_jsxs","jsx","_jsx","TiptapEditor","_ref","targetGrade","readabilityStats","setReadabilityStats","wordCount","sentenceCount","grade","ease","editor","extensions","content","editorProps","attributes","class","onUpdate","_ref2","text","getText","updateStats","highlightSentences","sentences","match","commands","unsetHighlight","start","sentence","trimmed","trim","end","length","color","setTextSelection","from","to","setHighlight","tooltip","insertContentAt","className","children"],"sources":["C:/Users/Mitchell/Downloads/Hemming Way App Clone/Hemming Way App Clone/src/TiptapEditor.jsx"],"sourcesContent":["// TiptapEditor.jsx\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useEditor, EditorContent } from \"@tiptap/react\";\r\nimport StarterKit from \"@tiptap/starter-kit\";\r\nimport Highlight from \"@tiptap/extension-highlight\";\r\nimport {\r\n  analyzeSentence,\r\n  countWords,\r\n  countSentences,\r\n  calculateFleschKincaidGrade,\r\n  calculateFleschReadingEase,\r\n} from \"./readabilityUtils\";\r\n\r\nexport default function TiptapEditor({ targetGrade }) {\r\n  const [readabilityStats, setReadabilityStats] = useState({\r\n    wordCount: 0,\r\n    sentenceCount: 0,\r\n    grade: 0,\r\n    ease: 0,\r\n  });\r\n\r\n  const editor = useEditor({\r\n    extensions: [StarterKit, Highlight],\r\n    content: `<p>Start typing your text here...</p>`,\r\n    editorProps: {\r\n      attributes: {\r\n        class: \"prose max-w-none p-4 border border-gray-300 rounded bg-white\",\r\n      },\r\n    },\r\n    onUpdate: ({ editor }) => {\r\n      const text = editor.getText();\r\n      updateStats(text);\r\n      highlightSentences(editor, text, targetGrade);\r\n    },\r\n  });\r\n\r\n  function updateStats(text) {\r\n    setReadabilityStats({\r\n      wordCount: countWords(text),\r\n      sentenceCount: countSentences(text),\r\n      grade: calculateFleschKincaidGrade(text),\r\n      ease: calculateFleschReadingEase(text),\r\n    });\r\n  }\r\n\r\n  function highlightSentences(editor, text, targetGrade) {\r\n    const sentences = text.match(/[^.!?]+[.!?]*/g) || [];\r\n    editor.commands.unsetHighlight();\r\n    let start = 0;\r\n\r\n    for (const sentence of sentences) {\r\n      const trimmed = sentence.trim();\r\n      const { grade, wordCount } = analyzeSentence(trimmed);\r\n      const end = start + trimmed.length;\r\n\r\n      let color = null;\r\n      if (wordCount >= 25) color = \"blue\";\r\n      else if (grade > targetGrade + 2) color = \"red\";\r\n      else if (grade > targetGrade) color = \"yellow\";\r\n\r\n      if (color) {\r\n        editor.commands.setTextSelection({ from: start + 1, to: end + 1 });\r\n        editor.commands.setHighlight({ color });\r\n\r\n        // Tooltip via title attribute\r\n        const tooltip = `Grade ${grade}, ${wordCount} words — ${grade > targetGrade ? \"try splitting it\" : \"okay\"}`;\r\n        editor.commands.insertContentAt(\r\n          { from: start + 1, to: end + 1 },\r\n          `<mark data-highlight-color=\"${color}\" title=\"${tooltip}\">${trimmed}</mark>`\r\n        );\r\n      }\r\n\r\n      start = end + 1;\r\n    }\r\n\r\n    editor.commands.setTextSelection(0);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"text-sm space-x-2\">\r\n        <span className=\"bg-gray-100 px-2 py-1 rounded\">Words: {readabilityStats.wordCount}</span>\r\n        <span className=\"bg-gray-100 px-2 py-1 rounded\">Sentences: {readabilityStats.sentenceCount}</span>\r\n        <span className=\"bg-green-100 px-2 py-1 rounded\">Grade Level: {readabilityStats.grade}</span>\r\n        <span className=\"bg-blue-100 px-2 py-1 rounded\">Reading Ease: {readabilityStats.ease}</span>\r\n      </div>\r\n\r\n      <EditorContent editor={editor} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}