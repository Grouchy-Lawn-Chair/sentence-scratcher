{"ast":null,"code":"// src/TiptapEditor.jsx\nimport\"use-sync-external-store/shim\";import React,{useEffect,useState,useCallback,useRef}from\"react\";import{useEditor,EditorContent}from\"@tiptap/react\";import StarterKit from\"@tiptap/starter-kit\";import Highlight from\"@tiptap/extension-highlight\";import Placeholder from\"@tiptap/extension-placeholder\";import{analyzeSentence,countWords,countSentences,calculateFleschKincaidGrade,calculateFleschReadingEase}from\"./readabilityUtils\";/** Settings */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ENABLE_BLUE=false;// set true if you want long sentence hints\n// length thresholds\nconst LONG_SENTENCE_WORDS=15;// used only if ENABLE_BLUE is true\nconst HEMI_HARD_WORDS=20;// yellow if length 20+\nconst HEMI_VERY_HARD_WORDS=25;// red if length 25+\n// grade delta thresholds, with floors so short sentences are not noisy\nconst DELTA_HARD=1;// yellow if grade > target + 1 AND words >= 14\nconst DELTA_VERY_HARD=3;// red if grade > target + 3 AND words >= 18\nconst MIN_YELLOW_WORDS_FOR_GRADE=14;const MIN_RED_WORDS_FOR_GRADE=18;const DEBOUNCE_MS=200;/** highlight colors */const COLOR_MAP={yellow:{bg:\"#fff3b0\",border:\"#facc15\"},red:{bg:\"#ffd1d1\",border:\"#f87171\"},blue:{bg:\"#dbeafe\",border:\"#93c5fd\"}};/** Extend Highlight to allow data-tip on the mark */const TipHighlight=Highlight.extend({addAttributes(){var _this$parent;return{...((_this$parent=this.parent)===null||_this$parent===void 0?void 0:_this$parent.call(this)),dataTip:{default:null,renderHTML:attrs=>attrs.dataTip?{\"data-tip\":attrs.dataTip}:{}}};}});export default function TiptapEditor(_ref){let{targetGrade}=_ref;const[stats,setStats]=useState({wordCount:0,sentenceCount:0,grade:0,ease:0});const lastSignature=useRef(\"\");const editor=useEditor({extensions:[StarterKit,TipHighlight.configure({multicolor:true}),Placeholder.configure({placeholder:\"Start typing, or paste your text here\",includeChildren:true})],content:\"\",editorProps:{attributes:{class:\"editor-content prose prose-sm sm:prose lg:prose-lg xl:prose-xl max-w-none p-4 border rounded bg-white focus:outline-none\"}}});const debounce=(fn,ms)=>{let t;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}clearTimeout(t);t=setTimeout(()=>fn(...args),ms);};};/** Decide the color for a sentence */const classify=(words,grade,target)=>{const delta=grade-target;// strong length rules first\nif(words>=HEMI_VERY_HARD_WORDS)return\"red\";if(words>=HEMI_HARD_WORDS)return\"yellow\";// grade delta rules, guarded by word floors\nif(delta>DELTA_VERY_HARD&&words>=MIN_RED_WORDS_FOR_GRADE)return\"red\";if(delta>DELTA_HARD&&words>=MIN_YELLOW_WORDS_FOR_GRADE)return\"yellow\";// optional long sentence nudge\nif(ENABLE_BLUE&&words>=LONG_SENTENCE_WORDS)return\"blue\";return null;};/** Build the tooltip message, option A, no numeric tail */const tooltipMessage=(color,_ref2)=>{let{byLengthHard,byLengthYellow,byDeltaHard,byDeltaYellow}=_ref2;if(color===\"red\"){if(byLengthHard&&byDeltaHard)return\"Very hard, long and above target, split and simplify.\";if(byLengthHard)return\"Very hard, 25 or more words, split this sentence.\";if(byDeltaHard)return\"Very hard, about 3 grades over target, split and simplify.\";}if(color===\"yellow\"){if(byLengthYellow&&byDeltaYellow)return\"A bit long and above your target, consider a small rewrite.\";if(byLengthYellow)return\"A bit long, 20 or more words, consider a split.\";if(byDeltaYellow)return\"Slightly above your target, try simpler words or a split.\";}if(color===\"blue\"){return\"Long sentence, consider a split.\";}return\"\";};/** Apply a colored highlight with our custom tooltip text */const applyHighlight=(from,to,color,tip)=>{const cfg=COLOR_MAP[color];if(!cfg)return;editor.chain().focus().setTextSelection({from,to}).setHighlight({color:cfg.bg,// use hex, prevents funky default blues\ndataTip:tip,// our JS tooltip reads this\nHTMLAttributes:{style:`background-color:${cfg.bg}; border:1px solid ${cfg.border}; border-radius:2px; padding:0 0.08em; color:inherit;`}}).run();};/** Analyze the doc and paint sentences */const analyzeAndHighlight=useCallback(()=>{if(!editor)return;const fullText=editor.getText();// include settings so target changes or toggles retrigger analysis\nconst signature=[fullText.length,targetGrade,ENABLE_BLUE,HEMI_HARD_WORDS,HEMI_VERY_HARD_WORDS,MIN_YELLOW_WORDS_FOR_GRADE,MIN_RED_WORDS_FOR_GRADE].join(\":\");if(signature===lastSignature.current)return;lastSignature.current=signature;// update totals\nsetStats({wordCount:countWords(fullText),sentenceCount:countSentences(fullText),grade:calculateFleschKincaidGrade(fullText),ease:calculateFleschReadingEase(fullText)});// clear old marks\neditor.chain().focus().unsetHighlight().run();const{doc}=editor.state;// walk text blocks\ndoc.descendants((node,pos)=>{const isBlock=[\"paragraph\",\"list_item\",\"heading\"].includes(node.type.name);if(!isBlock)return;const text=node.textContent;if(!text)return;// naive sentence split, keeps punctuation\nconst parts=text.match(/[^.!?…]+[.!?…]*/g)||[];let searchFrom=0;for(const raw of parts){const s=raw.trim();if(!s){searchFrom+=raw.length;continue;}const{wordCount,syllableCount,grade}=analyzeSentence(s);const fre=206.835-1.015*wordCount-84.6*(syllableCount/Math.max(1,wordCount));void fre;// FRE is computed for stats, not used in tooltip text per your choice\n// reasons for classification\nconst delta=grade-targetGrade;const byLengthHard=wordCount>=HEMI_VERY_HARD_WORDS;const byLengthYellow=wordCount>=HEMI_HARD_WORDS;const byDeltaHard=delta>DELTA_VERY_HARD&&wordCount>=MIN_RED_WORDS_FOR_GRADE;const byDeltaYellow=delta>DELTA_HARD&&wordCount>=MIN_YELLOW_WORDS_FOR_GRADE;let color=null;if(byLengthHard||byDeltaHard)color=\"red\";else if(byLengthYellow||byDeltaYellow)color=\"yellow\";else if(ENABLE_BLUE&&wordCount>=LONG_SENTENCE_WORDS)color=\"blue\";if(!color){searchFrom+=raw.length;continue;}// find indices inside this node\nconst startInNode=text.indexOf(s,searchFrom);if(startInNode===-1){searchFrom+=raw.length;continue;}const from=pos+1+startInNode;const to=from+s.length;const tip=tooltipMessage(color,{byLengthHard,byLengthYellow,byDeltaHard,byDeltaYellow});applyHighlight(from,to,color,tip);searchFrom=startInNode+s.length;}});// put caret at end to keep typing smooth\neditor.chain().focus().setTextSelection({from:fullText.length}).run();},[editor,targetGrade]);const debounced=useCallback(debounce(analyzeAndHighlight,DEBOUNCE_MS),[analyzeAndHighlight]);useEffect(()=>{if(!editor)return;editor.on(\"update\",debounced);debounced();// first pass\nreturn()=>editor.off(\"update\",debounced);},[editor,debounced]);/** singleton tooltip, avoids duplicate tips in StrictMode or remounts */useEffect(()=>{if(!editor)return;const root=editor.view.dom;// reuse one tooltip element\nlet tip=document.getElementById(\"ss-tooltip\");if(!tip){tip=document.createElement(\"div\");tip.id=\"ss-tooltip\";Object.assign(tip.style,{position:\"fixed\",zIndex:\"9999\",maxWidth:\"28rem\",padding:\"6px 8px\",fontSize:\"12px\",lineHeight:\"1.25\",color:\"#111827\",background:\"#f9fafb\",border:\"1px solid #e5e7eb\",borderRadius:\"4px\",boxShadow:\"0 4px 10px rgba(0,0,0,.08)\",pointerEvents:\"none\",display:\"none\"});document.body.appendChild(tip);}const show=(e,text)=>{tip.textContent=text||\"\";tip.style.left=`${e.clientX+10}px`;tip.style.top=`${e.clientY+12}px`;tip.style.display=text?\"block\":\"none\";};const hide=()=>{tip.style.display=\"none\";};const onMove=e=>{const m=e.target.closest('mark[data-tip]');if(m&&root.contains(m)){show(e,m.getAttribute(\"data-tip\")||\"\");}else{hide();}};// guard so we attach only once for this editor root\nif(!root.dataset.ssTipAttached){root.addEventListener(\"mousemove\",onMove);root.addEventListener(\"mouseleave\",hide);root.dataset.ssTipAttached=\"true\";}return()=>{root.removeEventListener(\"mousemove\",onMove);root.removeEventListener(\"mouseleave\",hide);delete root.dataset.ssTipAttached;hide();};},[editor]);if(!editor)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editor.chain().focus().toggleBold().run(),className:\"px-2 py-1 border rounded\",children:\"Bold\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>editor.chain().focus().toggleItalic().run(),className:\"px-2 py-1 border rounded\",children:\"Italic\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>editor.chain().focus().toggleHeading({level:1}).run(),className:\"px-2 py-1 border rounded\",children:\"H1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>editor.chain().focus().toggleBulletList().run(),className:\"px-2 py-1 border rounded\",children:\"\\u2022 List\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>editor.chain().focus().toggleOrderedList().run(),className:\"px-2 py-1 border rounded\",children:\"1. List\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 text-xs mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-red w-3 h-3 border inline-block\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Very hard, 25+ words, or grade +3 with 18+ words\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-yellow w-3 h-3 border inline-block\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Slightly over, 20+ words, or grade +1 with 14+ words\"})]}),ENABLE_BLUE&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-blue w-3 h-3 border inline-block\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Long, \",LONG_SENTENCE_WORDS,\"+ words\"]})]})]}),(()=>{const hasText=stats.wordCount>0&&stats.sentenceCount>0;const gradeDisplay=hasText?stats.grade.toFixed(1):\"—\";const easeDisplay=hasText?stats.ease.toFixed(1):\"—\";return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:[\"Words, \",stats.wordCount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:[\"Sentences, \",stats.sentenceCount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-100 px-2 py-1 rounded\",children:[\"Grade, \",gradeDisplay]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-100 px-2 py-1 rounded\",children:[\"Ease, \",easeDisplay]})]});})(),/*#__PURE__*/_jsx(EditorContent,{editor:editor})]});}","map":{"version":3,"names":["React","useEffect","useState","useCallback","useRef","useEditor","EditorContent","StarterKit","Highlight","Placeholder","analyzeSentence","countWords","countSentences","calculateFleschKincaidGrade","calculateFleschReadingEase","jsx","_jsx","jsxs","_jsxs","ENABLE_BLUE","LONG_SENTENCE_WORDS","HEMI_HARD_WORDS","HEMI_VERY_HARD_WORDS","DELTA_HARD","DELTA_VERY_HARD","MIN_YELLOW_WORDS_FOR_GRADE","MIN_RED_WORDS_FOR_GRADE","DEBOUNCE_MS","COLOR_MAP","yellow","bg","border","red","blue","TipHighlight","extend","addAttributes","_this$parent","parent","call","dataTip","default","renderHTML","attrs","TiptapEditor","_ref","targetGrade","stats","setStats","wordCount","sentenceCount","grade","ease","lastSignature","editor","extensions","configure","multicolor","placeholder","includeChildren","content","editorProps","attributes","class","debounce","fn","ms","t","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","classify","words","target","delta","tooltipMessage","color","_ref2","byLengthHard","byLengthYellow","byDeltaHard","byDeltaYellow","applyHighlight","from","to","tip","cfg","chain","focus","setTextSelection","setHighlight","HTMLAttributes","style","run","analyzeAndHighlight","fullText","getText","signature","join","current","unsetHighlight","doc","state","descendants","node","pos","isBlock","includes","type","name","text","textContent","parts","match","searchFrom","raw","s","trim","syllableCount","fre","Math","max","startInNode","indexOf","debounced","on","off","root","view","dom","document","getElementById","createElement","id","Object","assign","position","zIndex","maxWidth","padding","fontSize","lineHeight","background","borderRadius","boxShadow","pointerEvents","display","body","appendChild","show","e","left","clientX","top","clientY","hide","onMove","m","closest","contains","getAttribute","dataset","ssTipAttached","addEventListener","removeEventListener","className","children","onClick","toggleBold","toggleItalic","toggleHeading","level","toggleBulletList","toggleOrderedList","hasText","gradeDisplay","toFixed","easeDisplay"],"sources":["C:/Users/Mitchell/Downloads/Hemming Way App Clone/Hemming Way App Clone/src/TiptapEditor.jsx"],"sourcesContent":["// src/TiptapEditor.jsx\r\n\r\nimport \"use-sync-external-store/shim\";\r\nimport React, { useEffect, useState, useCallback, useRef } from \"react\";\r\nimport { useEditor, EditorContent } from \"@tiptap/react\";\r\nimport StarterKit from \"@tiptap/starter-kit\";\r\nimport Highlight from \"@tiptap/extension-highlight\";\r\nimport Placeholder from \"@tiptap/extension-placeholder\";\r\nimport {\r\n  analyzeSentence,\r\n  countWords,\r\n  countSentences,\r\n  calculateFleschKincaidGrade,\r\n  calculateFleschReadingEase,\r\n} from \"./readabilityUtils\";\r\n\r\n/** Settings */\r\nconst ENABLE_BLUE = false;              // set true if you want long sentence hints\r\n\r\n// length thresholds\r\nconst LONG_SENTENCE_WORDS = 15;         // used only if ENABLE_BLUE is true\r\nconst HEMI_HARD_WORDS = 20;             // yellow if length 20+\r\nconst HEMI_VERY_HARD_WORDS = 25;        // red if length 25+\r\n\r\n// grade delta thresholds, with floors so short sentences are not noisy\r\nconst DELTA_HARD = 1;                   // yellow if grade > target + 1 AND words >= 14\r\nconst DELTA_VERY_HARD = 3;              // red if grade > target + 3 AND words >= 18\r\nconst MIN_YELLOW_WORDS_FOR_GRADE = 14;\r\nconst MIN_RED_WORDS_FOR_GRADE = 18;\r\n\r\nconst DEBOUNCE_MS = 200;\r\n\r\n/** highlight colors */\r\nconst COLOR_MAP = {\r\n  yellow: { bg: \"#fff3b0\", border: \"#facc15\" },\r\n  red:    { bg: \"#ffd1d1\", border: \"#f87171\" },\r\n  blue:   { bg: \"#dbeafe\", border: \"#93c5fd\" },\r\n};\r\n\r\n/** Extend Highlight to allow data-tip on the mark */\r\nconst TipHighlight = Highlight.extend({\r\n  addAttributes() {\r\n    return {\r\n      ...this.parent?.(),\r\n      dataTip: {\r\n        default: null,\r\n        renderHTML: attrs => (attrs.dataTip ? { \"data-tip\": attrs.dataTip } : {}),\r\n      },\r\n    };\r\n  },\r\n});\r\n\r\nexport default function TiptapEditor({ targetGrade }) {\r\n  const [stats, setStats] = useState({ wordCount: 0, sentenceCount: 0, grade: 0, ease: 0 });\r\n  const lastSignature = useRef(\"\");\r\n\r\n  const editor = useEditor({\r\n    extensions: [\r\n      StarterKit,\r\n      TipHighlight.configure({ multicolor: true }),\r\n      Placeholder.configure({\r\n        placeholder: \"Start typing, or paste your text here\",\r\n        includeChildren: true,\r\n      }),\r\n    ],\r\n    content: \"\",\r\n    editorProps: {\r\n      attributes: {\r\n        class:\r\n          \"editor-content prose prose-sm sm:prose lg:prose-lg xl:prose-xl max-w-none p-4 border rounded bg-white focus:outline-none\",\r\n      },\r\n    },\r\n  });\r\n\r\n  const debounce = (fn, ms) => {\r\n    let t;\r\n    return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), ms); };\r\n  };\r\n\r\n  /** Decide the color for a sentence */\r\n  const classify = (words, grade, target) => {\r\n    const delta = grade - target;\r\n\r\n    // strong length rules first\r\n    if (words >= HEMI_VERY_HARD_WORDS) return \"red\";\r\n    if (words >= HEMI_HARD_WORDS) return \"yellow\";\r\n\r\n    // grade delta rules, guarded by word floors\r\n    if (delta > DELTA_VERY_HARD && words >= MIN_RED_WORDS_FOR_GRADE) return \"red\";\r\n    if (delta > DELTA_HARD && words >= MIN_YELLOW_WORDS_FOR_GRADE) return \"yellow\";\r\n\r\n    // optional long sentence nudge\r\n    if (ENABLE_BLUE && words >= LONG_SENTENCE_WORDS) return \"blue\";\r\n\r\n    return null;\r\n  };\r\n\r\n  /** Build the tooltip message, option A, no numeric tail */\r\n  const tooltipMessage = (color, { byLengthHard, byLengthYellow, byDeltaHard, byDeltaYellow }) => {\r\n    if (color === \"red\") {\r\n      if (byLengthHard && byDeltaHard) return \"Very hard, long and above target, split and simplify.\";\r\n      if (byLengthHard) return \"Very hard, 25 or more words, split this sentence.\";\r\n      if (byDeltaHard) return \"Very hard, about 3 grades over target, split and simplify.\";\r\n    }\r\n    if (color === \"yellow\") {\r\n      if (byLengthYellow && byDeltaYellow) return \"A bit long and above your target, consider a small rewrite.\";\r\n      if (byLengthYellow) return \"A bit long, 20 or more words, consider a split.\";\r\n      if (byDeltaYellow) return \"Slightly above your target, try simpler words or a split.\";\r\n    }\r\n    if (color === \"blue\") {\r\n      return \"Long sentence, consider a split.\";\r\n    }\r\n    return \"\";\r\n  };\r\n\r\n  /** Apply a colored highlight with our custom tooltip text */\r\n  const applyHighlight = (from, to, color, tip) => {\r\n    const cfg = COLOR_MAP[color]; if (!cfg) return;\r\n    editor\r\n      .chain()\r\n      .focus()\r\n      .setTextSelection({ from, to })\r\n      .setHighlight({\r\n        color: cfg.bg,                     // use hex, prevents funky default blues\r\n        dataTip: tip,                      // our JS tooltip reads this\r\n        HTMLAttributes: {\r\n          style: `background-color:${cfg.bg}; border:1px solid ${cfg.border}; border-radius:2px; padding:0 0.08em; color:inherit;`,\r\n        },\r\n      })\r\n      .run();\r\n  };\r\n\r\n  /** Analyze the doc and paint sentences */\r\n  const analyzeAndHighlight = useCallback(() => {\r\n    if (!editor) return;\r\n\r\n    const fullText = editor.getText();\r\n\r\n    // include settings so target changes or toggles retrigger analysis\r\n    const signature = [\r\n      fullText.length,\r\n      targetGrade,\r\n      ENABLE_BLUE,\r\n      HEMI_HARD_WORDS,\r\n      HEMI_VERY_HARD_WORDS,\r\n      MIN_YELLOW_WORDS_FOR_GRADE,\r\n      MIN_RED_WORDS_FOR_GRADE,\r\n    ].join(\":\");\r\n    if (signature === lastSignature.current) return;\r\n    lastSignature.current = signature;\r\n\r\n    // update totals\r\n    setStats({\r\n      wordCount: countWords(fullText),\r\n      sentenceCount: countSentences(fullText),\r\n      grade: calculateFleschKincaidGrade(fullText),\r\n      ease: calculateFleschReadingEase(fullText),\r\n    });\r\n\r\n    // clear old marks\r\n    editor.chain().focus().unsetHighlight().run();\r\n\r\n    const { doc } = editor.state;\r\n\r\n    // walk text blocks\r\n    doc.descendants((node, pos) => {\r\n      const isBlock = [\"paragraph\", \"list_item\", \"heading\"].includes(node.type.name);\r\n      if (!isBlock) return;\r\n\r\n      const text = node.textContent;\r\n      if (!text) return;\r\n\r\n      // naive sentence split, keeps punctuation\r\n      const parts = text.match(/[^.!?…]+[.!?…]*/g) || [];\r\n      let searchFrom = 0;\r\n\r\n      for (const raw of parts) {\r\n        const s = raw.trim();\r\n        if (!s) { searchFrom += raw.length; continue; }\r\n\r\n        const { wordCount, syllableCount, grade } = analyzeSentence(s);\r\n        const fre = 206.835 - 1.015 * wordCount - 84.6 * (syllableCount / Math.max(1, wordCount));\r\n        void fre; // FRE is computed for stats, not used in tooltip text per your choice\r\n\r\n        // reasons for classification\r\n        const delta = grade - targetGrade;\r\n        const byLengthHard = wordCount >= HEMI_VERY_HARD_WORDS;\r\n        const byLengthYellow = wordCount >= HEMI_HARD_WORDS;\r\n        const byDeltaHard = delta > DELTA_VERY_HARD && wordCount >= MIN_RED_WORDS_FOR_GRADE;\r\n        const byDeltaYellow = delta > DELTA_HARD && wordCount >= MIN_YELLOW_WORDS_FOR_GRADE;\r\n\r\n        let color = null;\r\n        if (byLengthHard || byDeltaHard) color = \"red\";\r\n        else if (byLengthYellow || byDeltaYellow) color = \"yellow\";\r\n        else if (ENABLE_BLUE && wordCount >= LONG_SENTENCE_WORDS) color = \"blue\";\r\n\r\n        if (!color) { searchFrom += raw.length; continue; }\r\n\r\n        // find indices inside this node\r\n        const startInNode = text.indexOf(s, searchFrom);\r\n        if (startInNode === -1) { searchFrom += raw.length; continue; }\r\n\r\n        const from = pos + 1 + startInNode;\r\n        const to = from + s.length;\r\n\r\n        const tip = tooltipMessage(color, { byLengthHard, byLengthYellow, byDeltaHard, byDeltaYellow });\r\n        applyHighlight(from, to, color, tip);\r\n        searchFrom = startInNode + s.length;\r\n      }\r\n    });\r\n\r\n    // put caret at end to keep typing smooth\r\n    editor.chain().focus().setTextSelection({ from: fullText.length }).run();\r\n  }, [editor, targetGrade]);\r\n\r\n  const debounced = useCallback(debounce(analyzeAndHighlight, DEBOUNCE_MS), [analyzeAndHighlight]);\r\n\r\n  useEffect(() => {\r\n    if (!editor) return;\r\n    editor.on(\"update\", debounced);\r\n    debounced(); // first pass\r\n    return () => editor.off(\"update\", debounced);\r\n  }, [editor, debounced]);\r\n\r\n  /** singleton tooltip, avoids duplicate tips in StrictMode or remounts */\r\n  useEffect(() => {\r\n    if (!editor) return;\r\n    const root = editor.view.dom;\r\n\r\n    // reuse one tooltip element\r\n    let tip = document.getElementById(\"ss-tooltip\");\r\n    if (!tip) {\r\n      tip = document.createElement(\"div\");\r\n      tip.id = \"ss-tooltip\";\r\n      Object.assign(tip.style, {\r\n        position: \"fixed\",\r\n        zIndex: \"9999\",\r\n        maxWidth: \"28rem\",\r\n        padding: \"6px 8px\",\r\n        fontSize: \"12px\",\r\n        lineHeight: \"1.25\",\r\n        color: \"#111827\",\r\n        background: \"#f9fafb\",\r\n        border: \"1px solid #e5e7eb\",\r\n        borderRadius: \"4px\",\r\n        boxShadow: \"0 4px 10px rgba(0,0,0,.08)\",\r\n        pointerEvents: \"none\",\r\n        display: \"none\",\r\n      });\r\n      document.body.appendChild(tip);\r\n    }\r\n\r\n    const show = (e, text) => {\r\n      tip.textContent = text || \"\";\r\n      tip.style.left = `${e.clientX + 10}px`;\r\n      tip.style.top = `${e.clientY + 12}px`;\r\n      tip.style.display = text ? \"block\" : \"none\";\r\n    };\r\n    const hide = () => { tip.style.display = \"none\"; };\r\n\r\n    const onMove = (e) => {\r\n      const m = e.target.closest('mark[data-tip]');\r\n      if (m && root.contains(m)) {\r\n        show(e, m.getAttribute(\"data-tip\") || \"\");\r\n      } else {\r\n        hide();\r\n      }\r\n    };\r\n\r\n    // guard so we attach only once for this editor root\r\n    if (!root.dataset.ssTipAttached) {\r\n      root.addEventListener(\"mousemove\", onMove);\r\n      root.addEventListener(\"mouseleave\", hide);\r\n      root.dataset.ssTipAttached = \"true\";\r\n    }\r\n\r\n    return () => {\r\n      root.removeEventListener(\"mousemove\", onMove);\r\n      root.removeEventListener(\"mouseleave\", hide);\r\n      delete root.dataset.ssTipAttached;\r\n      hide();\r\n    };\r\n  }, [editor]);\r\n\r\n  if (!editor) return null;\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* toolbar */}\r\n      <div className=\"flex flex-wrap gap-2 mb-2\">\r\n        <button onClick={() => editor.chain().focus().toggleBold().run()} className=\"px-2 py-1 border rounded\">Bold</button>\r\n        <button onClick={() => editor.chain().focus().toggleItalic().run()} className=\"px-2 py-1 border rounded\">Italic</button>\r\n        <button onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()} className=\"px-2 py-1 border rounded\">H1</button>\r\n        <button onClick={() => editor.chain().focus().toggleBulletList().run()} className=\"px-2 py-1 border rounded\">• List</button>\r\n        <button onClick={() => editor.chain().focus().toggleOrderedList().run()} className=\"px-2 py-1 border rounded\">1. List</button>\r\n      </div>\r\n\r\n      {/* legend, matches thresholds */}\r\n      <div className=\"flex flex-wrap gap-4 text-xs mb-2\">\r\n        <div className=\"flex items-center gap-1\">\r\n          <span className=\"legend-red w-3 h-3 border inline-block\"></span>\r\n          <span>Very hard, 25+ words, or grade +3 with 18+ words</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <span className=\"legend-yellow w-3 h-3 border inline-block\"></span>\r\n          <span>Slightly over, 20+ words, or grade +1 with 14+ words</span>\r\n        </div>\r\n        {ENABLE_BLUE && (\r\n          <div className=\"flex items-center gap-1\">\r\n            <span className=\"legend-blue w-3 h-3 border inline-block\"></span>\r\n            <span>Long, {LONG_SENTENCE_WORDS}+ words</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* stats, show dashes when empty */}\r\n      {(() => {\r\n        const hasText = stats.wordCount > 0 && stats.sentenceCount > 0;\r\n        const gradeDisplay = hasText ? stats.grade.toFixed(1) : \"—\";\r\n        const easeDisplay  = hasText ? stats.ease.toFixed(1)  : \"—\";\r\n\r\n        return (\r\n          <div className=\"flex flex-wrap gap-4 text-sm\">\r\n            <div className=\"bg-gray-100 px-2 py-1 rounded\">Words, {stats.wordCount}</div>\r\n            <div className=\"bg-gray-100 px-2 py-1 rounded\">Sentences, {stats.sentenceCount}</div>\r\n            <div className=\"bg-green-100 px-2 py-1 rounded\">Grade, {gradeDisplay}</div>\r\n            <div className=\"bg-blue-100 px-2 py-1 rounded\">Ease, {easeDisplay}</div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      <EditorContent editor={editor} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}