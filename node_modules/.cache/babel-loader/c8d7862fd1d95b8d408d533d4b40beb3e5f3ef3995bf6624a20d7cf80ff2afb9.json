{"ast":null,"code":"// src/TiptapEditor.jsx\nimport React,{useEffect,useMemo,useRef,useState}from\"react\";import{EditorContent,useEditor}from\"@tiptap/react\";import StarterKit from\"@tiptap/starter-kit\";import Highlight from\"@tiptap/extension-highlight\";import Placeholder from\"@tiptap/extension-placeholder\";import{Plugin,PluginKey}from\"prosemirror-state\";import{Decoration,DecorationSet}from\"prosemirror-view\";/* -------------------- small helpers -------------------- */import{jsx as _jsx}from\"react/jsx-runtime\";function splitSentences(text){// naive but effective for our use case\nconst re=/[^.!?]+[.!?]+|\\S+$/g;const out=[];let m;let idx=0;while(m=re.exec(text)){const s=m[0];out.push({text:s,from:idx,to:idx+s.length});idx+=s.length;}return out;}function countSyllables(word){// quick heuristic\nconst w=word.toLowerCase().replace(/[^a-z]/g,\"\");if(!w)return 0;if(w.length<=3)return 1;const cleaned=w.replace(/(?:es|ed|e)$/g,\"\");const m=cleaned.match(/[aeiouy]+/g);return Math.max(1,m?m.length:0);}function wordsIn(text){return text.trim().split(/\\s+/).filter(Boolean);}function statsFor(text){const sentences=splitSentences(text);const sentenceCount=sentences.length;let words=0;let syllables=0;for(const s of sentences){const ws=wordsIn(s.text);words+=ws.length;for(const w of ws)syllables+=countSyllables(w);}const WPS=sentenceCount?words/sentenceCount:0;const SPW=words?syllables/words:0;// Flesch Reading Ease\nconst ease=206.835-1.015*WPS-84.6*SPW;// Flesch Kincaid Grade\nconst grade=0.39*WPS+11.8*SPW-15.59;return{wordCount:words,sentenceCount,ease,grade};}function makeTooltip(_ref){let{words,grade,target,ease,reason}=_ref;const parts=[];parts.push(`Words ${words}`);parts.push(`grade ${grade.toFixed(1)}`);if(Number.isFinite(target))parts.push(`target ${target}`);if(Number.isFinite(ease))parts.push(`FRE ${ease.toFixed(1)}`);if(reason&&reason.length)parts.push(`Reason, ${reason.join(\", \")}`);return parts.join(\", \");}/* -------------------- exempt loader -------------------- */function useExemptProperNouns(){const[exempt,setExempt]=useState({single:new Set(),phrases:[]});useEffect(()=>{const url=`${process.env.PUBLIC_URL||\"\"}/exemptProperNouns.json`;fetch(url).then(r=>r.ok?r.json():null).then(data=>{if(!data)return;const single=new Set((data.singleWords||[]).map(s=>s.toLowerCase()));const phrases=(data.phrases||[]).map(p=>p.toLowerCase());setExempt({single,phrases});}).catch(()=>{// optional built in fallback\nsetExempt(old=>({single:new Set([...old.single,\"california\"]),phrases:old.phrases}));});},[]);return exempt;}/* -------------------- decoration plugin -------------------- */const decoKey=new PluginKey(\"sentenceHighlighter\");function buildDecorations(doc,cfg){const{targetGrade,showHardWords,exempt}=cfg;const text=doc.textBetween(0,doc.content.size,\"\\n\",\"\\n\");const sentences=splitSentences(text);const decos=[];let cursor=0;function mapToDocPos(offset){// Walk the doc text to map plain offset back to PM positions.\n// Simpler approach for one node doc.\n// For multi paragraph content we still get a decent mapping using textBetween.\nlet pos=0;doc.descendants((node,posHere)=>{if(node.isText){const len=node.text.length;if(offset<=cursor+len){pos=posHere+(offset-cursor);return false;}cursor+=len;}else if(node.isBlock){// count one for the paragraph break from textBetween\nif(cursor<offset)cursor+=1;}return undefined;});return pos;}// sentence highlights\nfor(const s of sentences){const ws=wordsIn(s.text);const words=ws.length;if(!words)continue;// sentence stats\nlet syll=0;for(const w of ws)syll+=countSyllables(w);const WPS=words;const SPW=syll/words;const ease=206.835-1.015*words-84.6*SPW;const grade=0.39*words+11.8*SPW-15.59;// thresholds\nconst veryHard=words>=25||grade>=targetGrade+3&&words>=18;const slightlyOver=words>=20||grade>=targetGrade+1&&words>=14;const longish=words>=15;let color=null;const reason=[];if(veryHard){color=\"red\";if(words>=25)reason.push(\"length\");if(grade>=targetGrade+3)reason.push(\"above target\");}else if(slightlyOver){color=\"yellow\";if(words>=20)reason.push(\"length\");if(grade>=targetGrade+1)reason.push(\"above target\");}else if(longish){color=\"blue\";reason.push(\"long\");}if(color){const from=mapToDocPos(s.from);const to=mapToDocPos(s.to);const title=makeTooltip({words,grade,target:targetGrade,ease,reason});decos.push(Decoration.inline(from,to,{nodeName:\"mark\",\"data-highlight-color\":color,title}));}}// likely hard words\nif(showHardWords){const wordRegex=/\\b[^\\s]+\\b/g;let m;let offset=0;// iterate raw text again\nwhile(m=wordRegex.exec(text)){const raw=m[0];const lower=raw.toLowerCase();// skip common words and proper noun exemptions\nconst isAlpha=/[a-z]/i.test(lower);if(!isAlpha)continue;// phrases exemption\nlet skip=false;for(const phrase of exempt.phrases){if(text.slice(m.index,m.index+phrase.length).toLowerCase()===phrase){skip=true;break;}}if(skip)continue;if(exempt.single.has(lower))continue;// heuristic hard word, over 10 chars or more than 3 syllables\nconst hard=lower.length>=11||countSyllables(lower)>=4;if(hard){const from=mapToDocPos(m.index);const to=mapToDocPos(m.index+raw.length);decos.push(Decoration.inline(from,to,{\"data-hard-word\":\"1\",title:`Possibly hard word, “${raw}”`}));}offset=m.index+raw.length;}}return DecorationSet.create(doc,decos);}function highlighterPlugin(cfgRef){return new Plugin({key:decoKey,state:{init:(_,_ref2)=>{let{doc}=_ref2;return DecorationSet.create(doc,[]);},apply(tr,set,oldState,newState){const recompute=tr.docChanged||tr.getMeta(decoKey)===\"recompute\"||tr.selectionSet;if(!recompute)return set.map(tr.mapping,tr.doc);const cfg=cfgRef.current;return buildDecorations(newState.doc,cfg);}},props:{decorations(state){return this.getState(state);}}});}/* -------------------- Editor component -------------------- */export default function TiptapEditor(_ref3){let{targetGrade=6,showHardWords=true,onShowHardWordsChange,onStats}=_ref3;const exempt=useExemptProperNouns();const cfgRef=useRef({targetGrade,showHardWords,exempt});// keep cfg current\nuseEffect(()=>{cfgRef.current={targetGrade,showHardWords,exempt};if(editor){const tr=editor.state.tr.setMeta(decoKey,\"recompute\");editor.view.dispatch(tr);}},[targetGrade,showHardWords,exempt]);// eslint-disable-line\nconst editor=useEditor({extensions:[StarterKit.configure({history:true}),Highlight,Placeholder.configure({placeholder:\"Paste or type. Sentences that run long or read above your target will highlight here.\"}),highlighterPlugin(cfgRef)],editorProps:{attributes:{class:\"editor-content prose max-w-none\"}},onUpdate(_ref4){let{editor}=_ref4;const plain=editor.state.doc.textBetween(0,editor.state.doc.content.size,\" \",\" \");const s=statsFor(plain);onStats&&onStats(s);// keep decorations fresh while typing\nconst tr=editor.state.tr.setMeta(decoKey,\"recompute\");editor.view.dispatch(tr);}});// expose programmatic control for the checkbox if you want two way\nuseEffect(()=>{if(!editor||typeof onShowHardWordsChange!==\"function\")return;// no inner control here, but you could wire a menu item to toggle and call back\n},[editor,onShowHardWordsChange]);return/*#__PURE__*/_jsx(\"div\",{className:\"panel p-3\",children:/*#__PURE__*/_jsx(EditorContent,{editor:editor})});}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","EditorContent","useEditor","StarterKit","Highlight","Placeholder","Plugin","PluginKey","Decoration","DecorationSet","jsx","_jsx","splitSentences","text","re","out","m","idx","exec","s","push","from","to","length","countSyllables","word","w","toLowerCase","replace","cleaned","match","Math","max","wordsIn","trim","split","filter","Boolean","statsFor","sentences","sentenceCount","words","syllables","ws","WPS","SPW","ease","grade","wordCount","makeTooltip","_ref","target","reason","parts","toFixed","Number","isFinite","join","useExemptProperNouns","exempt","setExempt","single","Set","phrases","url","process","env","PUBLIC_URL","fetch","then","r","ok","json","data","singleWords","map","p","catch","old","decoKey","buildDecorations","doc","cfg","targetGrade","showHardWords","textBetween","content","size","decos","cursor","mapToDocPos","offset","pos","descendants","node","posHere","isText","len","isBlock","undefined","syll","veryHard","slightlyOver","longish","color","title","inline","nodeName","wordRegex","raw","lower","isAlpha","test","skip","phrase","slice","index","has","hard","create","highlighterPlugin","cfgRef","key","state","init","_","_ref2","apply","tr","set","oldState","newState","recompute","docChanged","getMeta","selectionSet","mapping","current","props","decorations","getState","TiptapEditor","_ref3","onShowHardWordsChange","onStats","editor","setMeta","view","dispatch","extensions","configure","history","placeholder","editorProps","attributes","class","onUpdate","_ref4","plain","className","children"],"sources":["C:/Users/Mitchell/Downloads/Hemming Way App Clone/Hemming Way App Clone/src/TiptapEditor.jsx"],"sourcesContent":["// src/TiptapEditor.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { EditorContent, useEditor } from \"@tiptap/react\";\r\nimport StarterKit from \"@tiptap/starter-kit\";\r\nimport Highlight from \"@tiptap/extension-highlight\";\r\nimport Placeholder from \"@tiptap/extension-placeholder\";\r\n\r\nimport { Plugin, PluginKey } from \"prosemirror-state\";\r\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\r\n\r\n/* -------------------- small helpers -------------------- */\r\n\r\nfunction splitSentences(text) {\r\n  // naive but effective for our use case\r\n  const re = /[^.!?]+[.!?]+|\\S+$/g;\r\n  const out = [];\r\n  let m;\r\n  let idx = 0;\r\n  while ((m = re.exec(text))) {\r\n    const s = m[0];\r\n    out.push({ text: s, from: idx, to: idx + s.length });\r\n    idx += s.length;\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction countSyllables(word) {\r\n  // quick heuristic\r\n  const w = word.toLowerCase().replace(/[^a-z]/g, \"\");\r\n  if (!w) return 0;\r\n  if (w.length <= 3) return 1;\r\n  const cleaned = w.replace(/(?:es|ed|e)$/g, \"\");\r\n  const m = cleaned.match(/[aeiouy]+/g);\r\n  return Math.max(1, m ? m.length : 0);\r\n}\r\n\r\nfunction wordsIn(text) {\r\n  return text.trim().split(/\\s+/).filter(Boolean);\r\n}\r\n\r\nfunction statsFor(text) {\r\n  const sentences = splitSentences(text);\r\n  const sentenceCount = sentences.length;\r\n  let words = 0;\r\n  let syllables = 0;\r\n\r\n  for (const s of sentences) {\r\n    const ws = wordsIn(s.text);\r\n    words += ws.length;\r\n    for (const w of ws) syllables += countSyllables(w);\r\n  }\r\n  const WPS = sentenceCount ? words / sentenceCount : 0;\r\n  const SPW = words ? syllables / words : 0;\r\n\r\n  // Flesch Reading Ease\r\n  const ease = 206.835 - 1.015 * WPS - 84.6 * SPW;\r\n\r\n  // Flesch Kincaid Grade\r\n  const grade = 0.39 * WPS + 11.8 * SPW - 15.59;\r\n\r\n  return { wordCount: words, sentenceCount, ease, grade };\r\n}\r\n\r\nfunction makeTooltip({ words, grade, target, ease, reason }) {\r\n  const parts = [];\r\n  parts.push(`Words ${words}`);\r\n  parts.push(`grade ${grade.toFixed(1)}`);\r\n  if (Number.isFinite(target)) parts.push(`target ${target}`);\r\n  if (Number.isFinite(ease)) parts.push(`FRE ${ease.toFixed(1)}`);\r\n  if (reason && reason.length) parts.push(`Reason, ${reason.join(\", \")}`);\r\n  return parts.join(\", \");\r\n}\r\n\r\n/* -------------------- exempt loader -------------------- */\r\n\r\nfunction useExemptProperNouns() {\r\n  const [exempt, setExempt] = useState({ single: new Set(), phrases: [] });\r\n\r\n  useEffect(() => {\r\n    const url = `${process.env.PUBLIC_URL || \"\"}/exemptProperNouns.json`;\r\n    fetch(url)\r\n      .then((r) => (r.ok ? r.json() : null))\r\n      .then((data) => {\r\n        if (!data) return;\r\n        const single = new Set((data.singleWords || []).map((s) => s.toLowerCase()));\r\n        const phrases = (data.phrases || []).map((p) => p.toLowerCase());\r\n        setExempt({ single, phrases });\r\n      })\r\n      .catch(() => {\r\n        // optional built in fallback\r\n        setExempt((old) => ({\r\n          single: new Set([...old.single, \"california\"]),\r\n          phrases: old.phrases\r\n        }));\r\n      });\r\n  }, []);\r\n\r\n  return exempt;\r\n}\r\n\r\n/* -------------------- decoration plugin -------------------- */\r\n\r\nconst decoKey = new PluginKey(\"sentenceHighlighter\");\r\n\r\nfunction buildDecorations(doc, cfg) {\r\n  const { targetGrade, showHardWords, exempt } = cfg;\r\n\r\n  const text = doc.textBetween(0, doc.content.size, \"\\n\", \"\\n\");\r\n  const sentences = splitSentences(text);\r\n\r\n  const decos = [];\r\n  let cursor = 0;\r\n\r\n  function mapToDocPos(offset) {\r\n    // Walk the doc text to map plain offset back to PM positions.\r\n    // Simpler approach for one node doc.\r\n    // For multi paragraph content we still get a decent mapping using textBetween.\r\n    let pos = 0;\r\n    doc.descendants((node, posHere) => {\r\n      if (node.isText) {\r\n        const len = node.text.length;\r\n        if (offset <= cursor + len) {\r\n          pos = posHere + (offset - cursor);\r\n          return false;\r\n        }\r\n        cursor += len;\r\n      } else if (node.isBlock) {\r\n        // count one for the paragraph break from textBetween\r\n        if (cursor < offset) cursor += 1;\r\n      }\r\n      return undefined;\r\n    });\r\n    return pos;\r\n  }\r\n\r\n  // sentence highlights\r\n  for (const s of sentences) {\r\n    const ws = wordsIn(s.text);\r\n    const words = ws.length;\r\n    if (!words) continue;\r\n\r\n    // sentence stats\r\n    let syll = 0;\r\n    for (const w of ws) syll += countSyllables(w);\r\n    const WPS = words;\r\n    const SPW = syll / words;\r\n    const ease = 206.835 - 1.015 * words - 84.6 * SPW;\r\n    const grade = 0.39 * words + 11.8 * SPW - 15.59;\r\n\r\n    // thresholds\r\n    const veryHard = words >= 25 || (grade >= targetGrade + 3 && words >= 18);\r\n    const slightlyOver = words >= 20 || (grade >= targetGrade + 1 && words >= 14);\r\n    const longish = words >= 15;\r\n\r\n    let color = null;\r\n    const reason = [];\r\n    if (veryHard) {\r\n      color = \"red\";\r\n      if (words >= 25) reason.push(\"length\");\r\n      if (grade >= targetGrade + 3) reason.push(\"above target\");\r\n    } else if (slightlyOver) {\r\n      color = \"yellow\";\r\n      if (words >= 20) reason.push(\"length\");\r\n      if (grade >= targetGrade + 1) reason.push(\"above target\");\r\n    } else if (longish) {\r\n      color = \"blue\";\r\n      reason.push(\"long\");\r\n    }\r\n\r\n    if (color) {\r\n      const from = mapToDocPos(s.from);\r\n      const to = mapToDocPos(s.to);\r\n      const title = makeTooltip({ words, grade, target: targetGrade, ease, reason });\r\n      decos.push(\r\n        Decoration.inline(from, to, {\r\n          nodeName: \"mark\",\r\n          \"data-highlight-color\": color,\r\n          title\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  // likely hard words\r\n  if (showHardWords) {\r\n    const wordRegex = /\\b[^\\s]+\\b/g;\r\n    let m;\r\n    let offset = 0;\r\n    // iterate raw text again\r\n    while ((m = wordRegex.exec(text))) {\r\n      const raw = m[0];\r\n      const lower = raw.toLowerCase();\r\n\r\n      // skip common words and proper noun exemptions\r\n      const isAlpha = /[a-z]/i.test(lower);\r\n      if (!isAlpha) continue;\r\n\r\n      // phrases exemption\r\n      let skip = false;\r\n      for (const phrase of exempt.phrases) {\r\n        if (text.slice(m.index, m.index + phrase.length).toLowerCase() === phrase) {\r\n          skip = true;\r\n          break;\r\n        }\r\n      }\r\n      if (skip) continue;\r\n      if (exempt.single.has(lower)) continue;\r\n\r\n      // heuristic hard word, over 10 chars or more than 3 syllables\r\n      const hard =\r\n        lower.length >= 11 ||\r\n        countSyllables(lower) >= 4;\r\n\r\n      if (hard) {\r\n        const from = mapToDocPos(m.index);\r\n        const to = mapToDocPos(m.index + raw.length);\r\n        decos.push(\r\n          Decoration.inline(from, to, {\r\n            \"data-hard-word\": \"1\",\r\n            title: `Possibly hard word, “${raw}”`\r\n          })\r\n        );\r\n      }\r\n      offset = m.index + raw.length;\r\n    }\r\n  }\r\n\r\n  return DecorationSet.create(doc, decos);\r\n}\r\n\r\nfunction highlighterPlugin(cfgRef) {\r\n  return new Plugin({\r\n    key: decoKey,\r\n    state: {\r\n      init: (_, { doc }) => DecorationSet.create(doc, []),\r\n      apply(tr, set, oldState, newState) {\r\n        const recompute =\r\n          tr.docChanged ||\r\n          tr.getMeta(decoKey) === \"recompute\" ||\r\n          tr.selectionSet;\r\n\r\n        if (!recompute) return set.map(tr.mapping, tr.doc);\r\n\r\n        const cfg = cfgRef.current;\r\n        return buildDecorations(newState.doc, cfg);\r\n      }\r\n    },\r\n    props: {\r\n      decorations(state) {\r\n        return this.getState(state);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/* -------------------- Editor component -------------------- */\r\n\r\nexport default function TiptapEditor({\r\n  targetGrade = 6,\r\n  showHardWords = true,\r\n  onShowHardWordsChange,\r\n  onStats\r\n}) {\r\n  const exempt = useExemptProperNouns();\r\n\r\n  const cfgRef = useRef({\r\n    targetGrade,\r\n    showHardWords,\r\n    exempt\r\n  });\r\n\r\n  // keep cfg current\r\n  useEffect(() => {\r\n    cfgRef.current = { targetGrade, showHardWords, exempt };\r\n    if (editor) {\r\n      const tr = editor.state.tr.setMeta(decoKey, \"recompute\");\r\n      editor.view.dispatch(tr);\r\n    }\r\n  }, [targetGrade, showHardWords, exempt]); // eslint-disable-line\r\n\r\n  const editor = useEditor({\r\n    extensions: [\r\n      StarterKit.configure({ history: true }),\r\n      Highlight,\r\n      Placeholder.configure({\r\n        placeholder:\r\n          \"Paste or type. Sentences that run long or read above your target will highlight here.\"\r\n      }),\r\n      highlighterPlugin(cfgRef)\r\n    ],\r\n    editorProps: {\r\n      attributes: {\r\n        class: \"editor-content prose max-w-none\"\r\n      }\r\n    },\r\n    onUpdate({ editor }) {\r\n      const plain = editor.state.doc.textBetween(0, editor.state.doc.content.size, \" \", \" \");\r\n      const s = statsFor(plain);\r\n      onStats && onStats(s);\r\n\r\n      // keep decorations fresh while typing\r\n      const tr = editor.state.tr.setMeta(decoKey, \"recompute\");\r\n      editor.view.dispatch(tr);\r\n    }\r\n  });\r\n\r\n  // expose programmatic control for the checkbox if you want two way\r\n  useEffect(() => {\r\n    if (!editor || typeof onShowHardWordsChange !== \"function\") return;\r\n    // no inner control here, but you could wire a menu item to toggle and call back\r\n  }, [editor, onShowHardWordsChange]);\r\n\r\n  return (\r\n    <div className=\"panel p-3\">\r\n      <EditorContent editor={editor} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}