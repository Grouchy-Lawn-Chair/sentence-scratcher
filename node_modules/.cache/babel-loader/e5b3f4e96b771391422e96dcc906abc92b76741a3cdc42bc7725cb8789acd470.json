{"ast":null,"code":"// TiptapEditor.jsx\nimport React,{useEffect,useState}from\"react\";import{useEditor,EditorContent}from\"@tiptap/react\";import StarterKit from\"@tiptap/starter-kit\";import Highlight from\"@tiptap/extension-highlight\";import{analyzeSentence,countWords,countSentences,calculateFleschKincaidGrade,calculateFleschReadingEase}from\"./readabilityUtils\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function TiptapEditor(_ref){let{targetGrade}=_ref;const[readabilityStats,setReadabilityStats]=useState({wordCount:0,sentenceCount:0,grade:0,ease:0});const editor=useEditor({extensions:[StarterKit,Highlight],content:`<p>Start typing your text here...</p>`,onUpdate:_ref2=>{let{editor}=_ref2;const html=editor.getHTML();const text=editor.getText();updateStats(text);highlightSentences(editor,text,targetGrade);}});function updateStats(text){setReadabilityStats({wordCount:countWords(text),sentenceCount:countSentences(text),grade:calculateFleschKincaidGrade(text),ease:calculateFleschReadingEase(text)});}function highlightSentences(editor,text,targetGrade){const sentences=text.match(/[^.!?]+[.!?]*/g)||[];editor.commands.unsetHighlight();let start=0;for(const sentence of sentences){const trimmed=sentence.trim();const analysis=analyzeSentence(trimmed);const end=start+trimmed.length;const color=analysis.wordCount>=25?\"blue\":analysis.grade>targetGrade+2?\"red\":analysis.grade>targetGrade?\"yellow\":null;if(color){editor.commands.setTextSelection({from:start,to:end});editor.commands.setHighlight({color});}start=end+1;}editor.commands.setTextSelection(0);// reset cursor\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:[\"Words: \",readabilityStats.wordCount]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:[\"Sentences: \",readabilityStats.sentenceCount]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-green-100 px-2 py-1 rounded\",children:[\"Grade Level: \",readabilityStats.grade]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-blue-100 px-2 py-1 rounded\",children:[\"Reading Ease: \",readabilityStats.ease]})]}),/*#__PURE__*/_jsx(EditorContent,{editor:editor,className:\"border p-4 rounded bg-white\"})]});}","map":{"version":3,"names":["React","useEffect","useState","useEditor","EditorContent","StarterKit","Highlight","analyzeSentence","countWords","countSentences","calculateFleschKincaidGrade","calculateFleschReadingEase","jsxs","_jsxs","jsx","_jsx","TiptapEditor","_ref","targetGrade","readabilityStats","setReadabilityStats","wordCount","sentenceCount","grade","ease","editor","extensions","content","onUpdate","_ref2","html","getHTML","text","getText","updateStats","highlightSentences","sentences","match","commands","unsetHighlight","start","sentence","trimmed","trim","analysis","end","length","color","setTextSelection","from","to","setHighlight","className","children"],"sources":["C:/Users/Mitchell/Downloads/Hemming Way App Clone/Hemming Way App Clone/src/TiptapEditor.jsx"],"sourcesContent":["// TiptapEditor.jsx\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useEditor, EditorContent } from \"@tiptap/react\";\r\nimport StarterKit from \"@tiptap/starter-kit\";\r\nimport Highlight from \"@tiptap/extension-highlight\";\r\nimport {\r\n  analyzeSentence,\r\n  countWords,\r\n  countSentences,\r\n  calculateFleschKincaidGrade,\r\n  calculateFleschReadingEase,\r\n} from \"./readabilityUtils\";\r\n\r\nexport default function TiptapEditor({ targetGrade }) {\r\n  const [readabilityStats, setReadabilityStats] = useState({\r\n    wordCount: 0,\r\n    sentenceCount: 0,\r\n    grade: 0,\r\n    ease: 0,\r\n  });\r\n\r\n  const editor = useEditor({\r\n    extensions: [StarterKit, Highlight],\r\n    content: `<p>Start typing your text here...</p>`,\r\n    onUpdate: ({ editor }) => {\r\n      const html = editor.getHTML();\r\n      const text = editor.getText();\r\n      updateStats(text);\r\n      highlightSentences(editor, text, targetGrade);\r\n    },\r\n  });\r\n\r\n  function updateStats(text) {\r\n    setReadabilityStats({\r\n      wordCount: countWords(text),\r\n      sentenceCount: countSentences(text),\r\n      grade: calculateFleschKincaidGrade(text),\r\n      ease: calculateFleschReadingEase(text),\r\n    });\r\n  }\r\n\r\n  function highlightSentences(editor, text, targetGrade) {\r\n    const sentences = text.match(/[^.!?]+[.!?]*/g) || [];\r\n    editor.commands.unsetHighlight();\r\n\r\n    let start = 0;\r\n\r\n    for (const sentence of sentences) {\r\n      const trimmed = sentence.trim();\r\n      const analysis = analyzeSentence(trimmed);\r\n      const end = start + trimmed.length;\r\n\r\n      const color =\r\n        analysis.wordCount >= 25\r\n          ? \"blue\"\r\n          : analysis.grade > targetGrade + 2\r\n          ? \"red\"\r\n          : analysis.grade > targetGrade\r\n          ? \"yellow\"\r\n          : null;\r\n\r\n      if (color) {\r\n        editor.commands.setTextSelection({ from: start, to: end });\r\n        editor.commands.setHighlight({ color });\r\n      }\r\n\r\n      start = end + 1;\r\n    }\r\n\r\n    editor.commands.setTextSelection(0); // reset cursor\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"text-sm space-x-2\">\r\n        <span className=\"bg-gray-100 px-2 py-1 rounded\">Words: {readabilityStats.wordCount}</span>\r\n        <span className=\"bg-gray-100 px-2 py-1 rounded\">Sentences: {readabilityStats.sentenceCount}</span>\r\n        <span className=\"bg-green-100 px-2 py-1 rounded\">Grade Level: {readabilityStats.grade}</span>\r\n        <span className=\"bg-blue-100 px-2 py-1 rounded\">Reading Ease: {readabilityStats.ease}</span>\r\n      </div>\r\n      <EditorContent editor={editor} className=\"border p-4 rounded bg-white\" />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}